import { Route, Routes } from "react-router-dom";
import Home from "./pages/Home/Home";
import Registration from "./pages/Registration";
import Login from "./pages/Login/Login";
// import Rankings from "./pages/Rankings";
import Profile from "./pages/Profile";
import Developers from "./pages/Developers";
import Passing from "./pages/Passing";
// import QualifyingResults from "./pages/QualifyingResults";
import AboutOlympiad from "./pages/AboutOlympiad/AboutOlympiad";
import Consent from "./pages/Consent";
import Admin from "./pages/Admin";
import Partners from "./pages/Partners";
import Archive from "./pages/Archive";
import NotFound from "./pages/NotFound";
import OlympiadProfile from "./pages/OlympiadProfile";

function App() {
  return (
    <>
      <Routes>
        <Route path="/" element={<Home />} />
        <Route path="/registration" element={<Registration />} />
        <Route path="/login" element={<Login />} />
        <Route path="/profile" element={<Profile />} />
        {/* <Route path="/ranking" element={<Rankings />} /> */}
        {/* <Route path="/qualification" element={<QualifyingResults />} /> */}
        <Route path="/developers" element={<Developers />} />
        <Route path="/passing" element={<Passing />} />
        <Route path="/about" element={<AboutOlympiad />} />
        <Route path="/consent" element={<Consent />} />
        <Route path="/partners" element={<Partners />} />
        <Route path="/admin" element={<Admin />} />
        <Route path="/archive" element={<Archive />} />
        <Route path="/olympiad" element={<OlympiadProfile />} />
        <Route path="/*" element={<NotFound />} />
      </Routes>
    </>
  );
}

export default App;


  // Анимация для колонок
  export const columnVariants = {
    hidden: { opacity: 0, x: -20 },
    visible: (i: number) => ({
      opacity: 1,
      x: 0,
      transition: {
        delay: i * 0.1,
        duration: 0.5,
        ease: "easeOut",
      },
    }),
  };

import { Variants } from "framer-motion";

export const fadeUp: Variants = {
  hidden: { opacity: 0, y: 30 },
  visible: (i = 1) => ({
    opacity: 1,
    y: 0,
    transition: {
      delay: i * 0.005,
      duration: 0.6,
      ease: "easeOut",
    },
  }),
};

export const staggerContainer = {
  hidden: { opacity: 0 },
  visible: {
    opacity: 1,
    transition: {
      staggerChildren: 0.2,
      delayChildren: 0.3,
    },
  },
};



import cn from "clsx";
import { useThemeStore } from "../../../stores/themeStore";

function Footer() {
  const { isDarkMode } = useThemeStore();

  return (
    <footer
      className={cn(
        "text-md grid grid-cols-1 gap-4 border-t py-4 text-center text-gray-500 md:grid-cols-2",
        {
          "border-[#2c313c] bg-[#0d1117]": isDarkMode,
          "border-gray-200 bg-white": !isDarkMode,
        },
      )}
    >
      <section>
        Проект разработан <br /> курсантами факультета подготовки специалистов в
        области информационной безопасности <br /> Московского ордена Почета
        университета МВД России имени В.Я.&nbsp;Кикотя
      </section>
      <section>
        Организационный комитет
        <br />
        почта: olimpiada.mosu@mail.ru
        <br />
        тел.: +7 499 789-67-47
      </section>
    </footer>
  );
}

export default Footer;


import { Link, useNavigate } from "react-router-dom";
import cn from "clsx";
import { Button } from "../../ui/Button";
import { useThemeStore } from "../../../stores/themeStore";
import { useAuthStore } from "../../../stores/authStore";
import { useState } from "react";
import { AnimatePresence, motion } from "framer-motion";
import { Menu, X } from "lucide-react";

function Navbar() {
  const { isDarkMode, toggleTheme } = useThemeStore();
  const { isAuthenticated, userData, clearToken } = useAuthStore();
  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);

  const navigate = useNavigate();

  const handleLogout = () => {
    clearToken();
    navigate("/");
    setMobileMenuOpen(false);
  };

  return (
    <header
      className={cn(
        "sticky top-0 z-50 flex w-screen items-center justify-between border-b px-4 py-2 backdrop-blur sm:px-6",
        {
          "border-[#2c313c] bg-[#0d1117]/70 text-gray-300": isDarkMode,
          "border-gray-200 bg-white/70 text-gray-800": !isDarkMode,
        },
      )}
    >
      <div className="flex w-full items-center justify-between">
        <Link to={"/"} className="flex items-center gap-4">
          <img
            src="/mosu_logo.png"
            className="max-h-20"
            alt="Логотип Университета Цифровой Полиции"
          />
          <span>
            <h2 className="text-md hidden md:block md:text-lg">
              Московский ордена Почета университет МВД России имени В.Я. Кикотя
            </h2>
            <h1 className="hidden text-2xl font-bold md:block md:text-3xl">
              Всероссийская олимпиада школьников
            </h1>
          </span>
          <span className="text-2xl font-bold sm:hidden">
            <h1 className="md:block md:text-3xl">
              Всероссийская олимпиада школьников
            </h1>
          </span>
        </Link>

        {/* Основная навигация */}
        <nav className="hidden gap-6 text-sm font-medium md:flex md:gap-10">
          <Link to="/about" className="text-lg transition hover:text-blue-400">
            Об&nbsp;олимпиаде
          </Link>
          <Link
            to="/passing"
            className="text-lg transition hover:text-blue-400"
          >
            Прохождение
          </Link>
          <Link
            to="/partners"
            className="text-lg transition hover:text-blue-400"
          >
            Партнёры
          </Link>
        </nav>

        <div className="flex items-center gap-4">
          <button
            onClick={toggleTheme}
            className={cn("cursor-pointer rounded-lg p-2", {
              "text-gray-300 hover:bg-blue-950": isDarkMode,
              "text-gray-700 hover:bg-gray-200": !isDarkMode,
            })}
            aria-label={isDarkMode ? "Светлая тема" : "Тёмная тема"}
          >
            {isDarkMode ? (
              <svg
                xmlns="http://www.w3.org/2000/svg"
                className="h-5 w-5"
                viewBox="0 0 20 20"
                fill="currentColor"
              >
                <path
                  fillRule="evenodd"
                  d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"
                  clipRule="evenodd"
                />
              </svg>
            ) : (
              <svg
                xmlns="http://www.w3.org/2000/svg"
                className="h-5 w-5"
                viewBox="0 0 20 20"
                fill="currentColor"
              >
                <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z" />
              </svg>
            )}
          </button>

          {isAuthenticated ? (
            <div className="hidden items-center gap-4 md:flex">
              {userData?.role === "ADMIN" && (
                <Link to="/admin">
                  <Button>Админ-панель</Button>
                </Link>
              )}
              <Link to="/profile">
                <Button>Личный кабинет</Button>
              </Link>
              <Button onClick={handleLogout}>Выйти</Button>
            </div>
          ) : (
            <>
              <Link
                to="/login"
                className="hidden text-lg text-blue-400 transition hover:text-blue-300 md:inline-block"
              >
                Войти
              </Link>
              <Link to="/registration">
                <Button className="hidden md:block">Регистрация</Button>
              </Link>
            </>
          )}

          {/* Меню навигации для телефона */}
          <button
            className="ml-2 p-2 md:hidden"
            onClick={() => setMobileMenuOpen(!mobileMenuOpen)}
            aria-label="Меню"
          >
            {mobileMenuOpen ? (
              <X className="h-6 w-6" />
            ) : (
              <Menu className="h-6 w-6" />
            )}
          </button>
        </div>
      </div>

      {/* Навигация для телефона */}
      <AnimatePresence>
        {mobileMenuOpen && (
          <motion.div
            initial={{ opacity: 0, height: 0 }}
            animate={{ opacity: 1, height: "auto" }}
            exit={{ opacity: 0, height: 0 }}
            transition={{ duration: 0.2 }}
            className={cn(
              "absolute top-full left-0 w-full overflow-hidden md:hidden",
              {
                "bg-[#0d1117]": isDarkMode,
                "bg-white": !isDarkMode,
              },
            )}
          >
            <div className="flex flex-col space-y-4 p-4">
              <Link
                to="/about"
                className="py-2 text-lg transition hover:text-blue-400"
                onClick={() => setMobileMenuOpen(false)}
              >
                Об олимпиаде
              </Link>
              <Link
                to="/passing"
                className="py-2 text-lg transition hover:text-blue-400"
                onClick={() => setMobileMenuOpen(false)}
              >
                Прохождение
              </Link>
              <Link
                to="/partners"
                className="py-2 text-lg transition hover:text-blue-400"
                onClick={() => setMobileMenuOpen(false)}
              >
                Партнёры
              </Link>

              {isAuthenticated ? (
                <div className="flex flex-col gap-4 pt-4">
                  {userData?.role === "ADMIN" && (
                    <Link to="/admin" onClick={() => setMobileMenuOpen(false)}>
                      <Button className="w-full">Админ-панель</Button>
                    </Link>
                  )}
                  <Link to="/profile" onClick={() => setMobileMenuOpen(false)}>
                    <Button className="w-full">Личный кабинет</Button>
                  </Link>
                  <Link to="/" onClick={() => setMobileMenuOpen(false)}>
                    <Button onClick={handleLogout} className="w-full">
                      Выйти
                    </Button>
                  </Link>
                </div>
              ) : (
                <div className="flex flex-col gap-4 pt-4">
                  <Link
                    to="/login"
                    className="w-full py-2 text-center text-lg text-blue-400 transition hover:text-blue-300"
                    onClick={() => setMobileMenuOpen(false)}
                  >
                    Войти
                  </Link>
                  <Link
                    to="/registration"
                    onClick={() => setMobileMenuOpen(false)}
                  >
                    <Button className="w-full">Регистрация</Button>
                  </Link>
                </div>
              )}
            </div>
          </motion.div>
        )}
      </AnimatePresence>
    </header>
  );
}

export default Navbar;


import bg_image from "/public/background.png";

function Background() {
  return (
    <div className="pointer-events-none fixed inset-0 z-0">
      <div
        className="absolute inset-0 bg-cover bg-no-repeat opacity-40"
        style={{
          backgroundImage: `url(${bg_image})`,
          backgroundPosition: "right center",
          backgroundSize: "cover",
        }}
      />
      {/* Градиентная маска для лучшей читаемости */}
      <div className={"absolute inset-0"} />
    </div>
  );
}

export default Background;


import { m } from "framer-motion";
import { Blob } from "./Blob";

export const BackgroundBlobs = () => {
  return (
    <m.div
      initial={{ opacity: 0 }}
      animate={{ opacity: 1 }}
      className="pointer-events-none fixed inset-0 overflow-hidden"
    >
      <Blob
        type="rotating"
        className="absolute -top-60 left-1/4 h-[500px] w-[500px] rounded-full bg-gradient-to-r from-blue-900/10 to-purple-900/10 blur-[100px]"
      />

      <Blob
        type="pulsing"
        className="absolute top-1/3 right-1/4 h-[400px] w-[400px] rounded-full bg-blue-800/10 blur-[90px]"
      />

      <Blob
        type="floating"
        className="absolute top-1/4 left-1/3 h-40 w-40 rounded-full bg-purple-500/5 blur-[60px]"
      />

      <Blob
        type="wave"
        className="absolute -bottom-40 left-1/2 h-[300px] w-[600px] -skew-y-12 bg-gradient-to-r from-blue-700/10 to-purple-700/10 blur-[80px]"
      />

      <Blob
        type="floating"
        className="absolute top-2/4 right-20 h-32 w-32 rounded-full bg-cyan-400/10 blur-[50px]"
      />

      <Blob
        type="rotating"
        className="absolute bottom-1/4 left-20 h-28 w-28 rounded-full bg-indigo-500/10 blur-[40px]"
      />
    </m.div>
  );
};


import { m, Variants } from "framer-motion";

const blobAnimations: Record<string, Variants> = {
  rotating: {
    rotating: {
      rotate: 360,
      transition: {
        duration: 40,
        repeat: Infinity,
        ease: "linear",
      },
    },
  },
  pulsing: {
    pulsing: {
      scale: [1, 1.2, 1],
      opacity: [0.8, 0.5, 0.8],
      transition: {
        duration: 15,
        repeat: Infinity,
        ease: "easeInOut",
      },
    },
  },
  floating: {
    floating: {
      y: ["0%", "-20%", "0%"],
      transition: {
        duration: 12,
        repeat: Infinity,
        ease: "easeInOut",
      },
    },
  },
  wave: {
    wave: {
      x: ["0%", "5%", "0%"],
      transition: {
        duration: 18,
        repeat: Infinity,
        ease: "easeInOut",
      },
    },
  },
};

interface BlobProps {
  type: keyof typeof blobAnimations;
  className: string;
}

export const Blob = ({ type, className }: BlobProps) => {
  return (
    <m.div
      initial={false}
      animate={type}
      variants={blobAnimations[type]}
      className={className}
    />
  );
};


import { forwardRef } from "react";
import { m } from "framer-motion";
import { type ButtonHTMLAttributes, type PropsWithChildren } from "react";
import { clsx } from "clsx";

type ButtonSize = "sm" | "md" | "lg" | "xl";

interface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {
  size?: ButtonSize;
}

export const Button = forwardRef<
  HTMLButtonElement,
  PropsWithChildren<ButtonProps>
>(({ size = "md", className, children, ...rest }, ref) => {
  const base =
    "rounded-lg cursor-pointer bg-gradient-to-r from-blue-600 max-w-lg to-blue-500 text-white hover:from-blue-500 hover:to-blue-600";

  const sizeMap: Record<ButtonSize, string> = {
    sm: "px-3 py-1.5 text-sm",
    md: "px-4 py-2 text-base",
    lg: "px-6 py-3 text-lg",
    xl: "px-8 py-4 text-xl",
  };

  return (
    // @ts-ignore
    <m.button
      ref={ref}
      className={clsx(base, sizeMap[size], className)}
      whileHover={{ scale: 1.05 }}
      whileTap={{ scale: 1 }}
      initial={{ opacity: 0, scale: 0.9 }}
      animate={{ opacity: 1, scale: 1 }}
      transition={{ duration: 0.3 }}
      {...rest}
    >
      {children}
    </m.button>
  );
});

Button.displayName = "Button";


import { ComponentProps } from "react";
import { fadeUp } from "../animations/fadeUp";
import { m } from "framer-motion";
import cn from "clsx";
import { useThemeStore } from "../../stores/themeStore";

function Input(props: ComponentProps<"input">) {
  const { isDarkMode } = useThemeStore();

  return (
    // @ts-ignore
    <m.input
      variants={fadeUp}
      initial="hidden"
      animate="visible"
      {...props}
      className={cn(
        "rounded-lg border-solid border-blue-500 px-6 py-2 text-lg outline-2 outline-offset-2 outline-blue-500 outline-solid",
        {
          "placeholder-gray-400": isDarkMode,
          "bg-blue-200/55 placeholder-gray-500": !isDarkMode,
        },
      )}
    />
  );
}

export default Input;


import { ComponentProps, ReactNode } from "react";
import { fadeUp } from "../animations/fadeUp";
import { m } from "framer-motion";
import cn from "clsx";
import { useThemeStore } from "../../stores/themeStore";

type SelectProps = ComponentProps<"select"> & {
  children: ReactNode;
};

function Select({ children, ...props }: SelectProps) {
  const { isDarkMode } = useThemeStore();

  return (
    // @ts-ignore
    <m.select
      variants={fadeUp}
      initial="hidden"
      animate="visible"
      {...props}
      className={cn(
        "rounded-lg border-solid border-blue-500 px-6 py-2 text-lg outline-2 outline-offset-2 outline-blue-500 outline-solid",
        { "bg-blue-200/55": !isDarkMode },
      )}
    >
      {children}
    </m.select>
  );
}

export default Select;


export const getCustomToastStyle = (isDarkMode: boolean) => ({
  style: {
    background: isDarkMode
      ? "linear-gradient(to right, oklch(42.4% 0.199 265.638), oklch(37.9% 0.146 265.522)"
      : "linear-gradient(to bottom right, rgb(239, 246, 255, 0.95), rgba(219, 234, 254, 0.98), rgb(191, 219, 254))",

    color: isDarkMode ? "white" : "#0f172a",
  },
});


import cn from "clsx";
import { m } from "framer-motion";
import { Link } from "react-router-dom";
import { useThemeStore } from "../../stores/themeStore";
import { BackgroundBlobs } from "../../components/ui/BackgroundBlobs/BackgroundBlobs";
import Navbar from "../../components/layout/Navbar/Navbar";
import { fadeUp } from "../../components/animations/fadeUp";
import Docs from "./Sections/Docs";
import { Button } from "../../components/ui/Button";
import Footer from "../../components/layout/Footer/Footer";
import Background from "../../components/ui/Background";
import { useInView } from "framer-motion";
import { useRef } from "react";

function AboutOlympiad() {
  const { isDarkMode } = useThemeStore();

  // Refs для отслеживания появления в viewport
  const timelineRef = useRef(null);
  const finalTextRef = useRef(null);
  const buttonRef = useRef(null);
  const isTimelineInView = useInView(timelineRef, {
    once: true,
    margin: "-100px",
  });
  const isFinalTextInView = useInView(finalTextRef, {
    once: true,
    margin: "-50px",
  });
  const isButtonInView = useInView(buttonRef, { once: true, margin: "-50px" });

  const timelineData = [
    {
      number: "1",
      title: "Регистрация участников",
      period: "октябрь - декабрь 2025 года",
      description: "Онлайн-регистрация на официальном сайте Олимпиады",
    },
    {
      number: "2",
      title: "Отборочный этап",
      period: "ноябрь - декабрь 2025 года",
      description: "Дистанционное тестирование по выбранным профилям",
    },
    {
      number: "3",
      title: "Заключительный этап",
      period: "февраль - март 2026 года",
      description:
        "Очный этап на базе Московского ордена Почета университета МВД России имени В.Я. Кикотя",
    },
  ];

  // Анимации для графика
  const timelineVariants = {
    hidden: { opacity: 0 },
    visible: {
      opacity: 1,
      transition: {
        staggerChildren: 0.3,
      },
    },
  };

  const itemVariants = {
    hidden: {
      opacity: 0,
      y: 30,
      scale: 0.9,
    },
    visible: {
      opacity: 1,
      y: 0,
      scale: 1,
      transition: {
        type: "spring",
        damping: 15,
        stiffness: 100,
      },
    },
  };

  const lineVariants = {
    hidden: { scaleY: 0 },
    visible: {
      scaleY: 1,
      transition: {
        duration: 1,
        ease: "easeOut",
      },
    },
  };

  const iconVariants = {
    hidden: {
      scale: 0,
      rotate: -180,
    },
    visible: {
      scale: 1,
      rotate: 0,
      transition: {
        type: "spring",
        damping: 15,
        stiffness: 200,
      },
    },
  };

  return (
    <div
      className={cn("min-h-screen w-screen font-sans", {
        "bg-[#0b0f1a] text-white": isDarkMode,
        "bg-gray-50/20 text-gray-900": !isDarkMode,
      })}
    >
      <Background />
      <BackgroundBlobs />
      <Navbar />

      <section className="flex items-center justify-center px-6 py-12">
        <div className="w-10xl mx-auto max-w-4xl">
          <m.div
            variants={fadeUp}
            initial="hidden"
            animate="visible"
            className="space-y-8"
          >
            <h2
              className={cn("text-center text-4xl font-bold md:text-5xl", {
                "text-white": isDarkMode,
                "text-gray-900": !isDarkMode,
              })}
            >
              Об олимпиаде
            </h2>

            <div
              className={cn("rounded-2xl p-8 text-lg", {
                "bg-[#0b0f1a] outline-2 outline-blue-900": isDarkMode,
                "bg-white shadow-md outline-2 outline-blue-500": !isDarkMode,
              })}
            >
              {/* Общая информация */}
              <div className="mb-8">
                <h3
                  className={cn("mb-4 text-center text-2xl font-semibold", {
                    "text-white": isDarkMode,
                    "text-blue-600": !isDarkMode,
                  })}
                >
                  Общая информация
                </h3>
                <p className="mb-4">
                  Олимпиада "Университет цифровой полиции" направлена на
                  популяризацию государственной службы и профессии
                  "Полицейский", стимулирование интереса обучающихся к
                  деятельности Министерства внутренних дел Российской Федерации,
                  выявление творческих способностей и интереса к научной и
                  научно-исследовательской деятельности, создание условий для
                  интеллектуального развития и поддержки одаренных школьников, а
                  также содействие им в выборе направления профессиональной
                  деятельности и продолжении образования.
                </p>
                <p className="mb-4">
                  Олимпиада проводится среди школьников 10х, 11х классов, 1-2
                  курсов колледжа/техникума по профилям «Информационная
                  безопасность» и «Обществознание». В олимпиаде могут принять
                  участие граждане Российской Федерации, обучающиеся в
                  образовательных учреждениях, независимо от места проживания,
                  места учебы, участия в других олимпиадах и конкурсах различных
                  уровней.
                </p>
                <p className="mb-6">
                  Участие в Олимпиаде школьников «Университет цифровой полиции»
                  позволит получить дополнительные индивидуальные баллы при
                  поступлении в Московский университет МВД России имени В.Я.
                  Кикотя.
                </p>
              </div>

              <div className="mb-8">
                <h3
                  className={cn("mb-4 text-center text-2xl font-semibold", {
                    "text-white": isDarkMode,
                    "text-blue-600": !isDarkMode,
                  })}
                >
                  Документы
                </h3>
                <Docs />
              </div>

              {/* График проведения */}
              <div>
                <h3
                  className={cn("mb-8 text-center text-2xl font-semibold", {
                    "text-white": isDarkMode,
                    "text-blue-600": !isDarkMode,
                  })}
                >
                  График проведения олимпиады в 2025-2026 году
                </h3>

                {/* Визуальная временная шкала */}
                <m.div
                  ref={timelineRef}
                  className="relative mb-8"
                  variants={timelineVariants}
                  initial="hidden"
                  animate={isTimelineInView ? "visible" : "hidden"}
                >
                  {/* Анимированная вертикальная линия */}
                  <m.div
                    variants={lineVariants}
                    className={cn(
                      "absolute top-0 left-8 h-full w-0.5 origin-top transform md:left-1/2 md:-translate-x-1/2",
                      {
                        "bg-blue-600": isDarkMode,
                        "bg-blue-400": !isDarkMode,
                      },
                    )}
                  />

                  {timelineData.map((item, index) => (
                    <m.div
                      key={index}
                      variants={itemVariants}
                      className={cn(
                        "relative mb-8 flex items-start md:mb-10",
                        index % 2 === 0 ? "md:flex-row" : "md:flex-row-reverse",
                      )}
                    >
                      {/* Анимированная иконка с номером */}
                      <m.div
                        variants={iconVariants}
                        className={cn(
                          "relative z-10 flex h-14 w-14 shrink-0 items-center justify-center rounded-full border-4 text-2xl font-bold shadow-lg",
                          {
                            "border-blue-600 bg-blue-700 text-white":
                              isDarkMode,
                            "border-blue-500 bg-blue-600 text-white":
                              !isDarkMode,
                          },
                        )}
                      >
                        {item.number}
                      </m.div>

                      {/* Контент с отдельной анимацией */}
                      <m.div
                        initial={{ opacity: 0, x: index % 2 === 0 ? -20 : 20 }}
                        animate={
                          isTimelineInView
                            ? { opacity: 1, x: 0 }
                            : { opacity: 0, x: index % 2 === 0 ? -20 : 20 }
                        }
                        transition={{
                          delay: index * 0.3 + 0.5,
                          type: "spring",
                          stiffness: 100,
                        }}
                        className={cn(
                          "ml-6 flex-1 rounded-2xl p-6 shadow-lg md:ml-8 md:w-1/2",
                          {
                            "bg-gray-900": isDarkMode,
                            "bg-blue-50": !isDarkMode,
                          },
                        )}
                      >
                        <h4
                          className={cn("mb-2 text-2xl font-semibold", {
                            "text-white": isDarkMode,
                            "text-blue-800": !isDarkMode,
                          })}
                        >
                          {item.title}
                        </h4>
                        <p
                          className={cn("text-md mb-3 font-medium", {
                            "text-blue-300": isDarkMode,
                            "text-blue-600": !isDarkMode,
                          })}
                        >
                          {item.period}
                        </p>
                        <p
                          className={cn("text-md", {
                            "text-gray-300": isDarkMode,
                            "text-gray-700": !isDarkMode,
                          })}
                        >
                          {item.description}
                        </p>
                      </m.div>
                    </m.div>
                  ))}
                </m.div>

                <m.div
                  ref={finalTextRef}
                  initial={{ opacity: 0, y: 20 }}
                  animate={
                    isFinalTextInView
                      ? { opacity: 1, y: 0 }
                      : { opacity: 0, y: 20 }
                  }
                  transition={{ duration: 0.6 }}
                  className="text-center"
                >
                  <p className="text-lg font-medium">
                    Для прохождения Олимпиады необходимо пройти процедуру
                    регистрации в личном кабинете на сайте.
                  </p>
                </m.div>
              </div>
            </div>

            <m.div
              ref={buttonRef}
              className="flex justify-center gap-4"
              initial={{ opacity: 0, y: 20 }}
              animate={
                isButtonInView ? { opacity: 1, y: 0 } : { opacity: 0, y: 20 }
              }
              transition={{ duration: 0.6 }}
            >
              <Link to="/">
                <Button className="px-7 py-3">Вернуться на главную</Button>
              </Link>
            </m.div>
          </m.div>
        </div>
      </section>

      <Footer />
    </div>
  );
}

export default AboutOlympiad;


import { m } from "framer-motion";
import { fadeUp } from "../../../components/animations/fadeUp";
import { useThemeStore } from "../../../stores/themeStore";
import cn from "clsx";
import position from "/public/position.pdf";
import regulationsSociety from "/public/regulationsSociety.pdf";
import methodologySociety from "/public/methodologySociety.pdf";
import chartSociety from "/public/chartSociety.pdf";
import regulationsInfoSec from "/public/regulationsInfoSec.pdf";
import chartInfoSec from "/public/chartInfoSec.pdf";

function Docs() {
  const { isDarkMode } = useThemeStore();

  return (
    <div className="gridgap-6 text-center">
      <section className="mb-8">
        <a href={position} target="_blank" rel="noopener noreferrer">
          <m.div
            variants={fadeUp}
            initial="hidden"
            animate="visible"
            whileHover={{ scale: 1.05 }}
            whileTap={{ scale: 1 }}
            className={cn(
              "mb-6 cursor-pointer rounded-xl p-6 py-6 text-lg font-medium shadow-xl transition",
              {
                "bg-[#14181d] text-blue-300 hover:shadow-blue-500/20":
                  isDarkMode,
                "border border-gray-200 bg-white text-blue-600 shadow-sm hover:shadow-blue-200":
                  !isDarkMode,
              },
            )}
          >
            Положение
          </m.div>
        </a>
      </section>
      <m.h3
        variants={fadeUp}
        initial="hidden"
        animate="visible"
        className={cn("mb-4 text-center text-xl font-semibold", {
          "text-blue-400": isDarkMode,
          "text-blue-600": !isDarkMode,
        })}
      >
        Информационная безопасность
      </m.h3>
      <section className="mb-8 grid grid-cols-1 gap-6 md:grid-cols-3">
        <a href={regulationsInfoSec} target="_blank" rel="noopener noreferrer">
          <m.div
            variants={fadeUp}
            initial="hidden"
            animate="visible"
            whileHover={{ scale: 1.05 }}
            whileTap={{ scale: 1 }}
            className={cn(
              "cursor-pointer rounded-xl p-6 py-6 text-lg font-medium shadow-xl transition",
              {
                "bg-[#14181d] text-blue-300 hover:shadow-blue-500/20":
                  isDarkMode,
                "border border-gray-200 bg-white text-blue-600 shadow-sm hover:shadow-blue-200":
                  !isDarkMode,
              },
            )}
          >
            Регламент
          </m.div>
        </a>
        <a href="#" target="_blank" rel="noopener noreferrer">
          <m.div
            variants={fadeUp}
            initial="hidden"
            animate="visible"
            whileHover={{ scale: 1.05 }}
            whileTap={{ scale: 1 }}
            className={cn(
              "cursor-pointer rounded-xl p-6 py-6 text-lg font-medium shadow-xl transition",
              {
                "bg-[#14181d] text-blue-300 hover:shadow-blue-500/20":
                  isDarkMode,
                "border border-gray-200 bg-white text-blue-600 shadow-sm hover:shadow-blue-200":
                  !isDarkMode,
              },
            )}
          >
            Методика оценки
          </m.div>
        </a>
        <a href={chartInfoSec} target="_blank" rel="noopener noreferrer">
          <m.div
            variants={fadeUp}
            initial="hidden"
            animate="visible"
            whileHover={{ scale: 1.05 }}
            whileTap={{ scale: 1 }}
            className={cn(
              "cursor-pointer rounded-xl p-6 py-6 text-lg font-medium shadow-xl transition",
              {
                "bg-[#14181d] text-blue-300 hover:shadow-blue-500/20":
                  isDarkMode,
                "border border-gray-200 bg-white text-blue-600 shadow-sm hover:shadow-blue-200":
                  !isDarkMode,
              },
            )}
          >
            График проведения
          </m.div>
        </a>
      </section>
      <m.h3
        variants={fadeUp}
        initial="hidden"
        animate="visible"
        className={cn("mb-4 text-center text-xl font-semibold", {
          "text-blue-400": isDarkMode,
          "text-blue-600": !isDarkMode,
        })}
      >
        Обществознание
      </m.h3>
      <section className="grid grid-cols-1 gap-6 md:grid-cols-3">
        <a href={regulationsSociety} target="_blank" rel="noopener noreferrer">
          <m.div
            variants={fadeUp}
            initial="hidden"
            animate="visible"
            whileHover={{ scale: 1.05 }}
            whileTap={{ scale: 1 }}
            className={cn(
              "cursor-pointer rounded-xl p-6 py-6 text-lg font-medium shadow-xl transition",
              {
                "bg-[#14181d] text-blue-300 hover:shadow-blue-500/20":
                  isDarkMode,
                "border border-gray-200 bg-white text-blue-600 shadow-sm hover:shadow-blue-200":
                  !isDarkMode,
              },
            )}
          >
            Регламент
          </m.div>
        </a>
        <a href={methodologySociety} target="_blank" rel="noopener noreferrer">
          <m.div
            variants={fadeUp}
            initial="hidden"
            animate="visible"
            whileHover={{ scale: 1.05 }}
            whileTap={{ scale: 1 }}
            className={cn(
              "cursor-pointer rounded-xl p-6 py-6 text-lg font-medium shadow-xl transition",
              {
                "bg-[#14181d] text-blue-300 hover:shadow-blue-500/20":
                  isDarkMode,
                "border border-gray-200 bg-white text-blue-600 shadow-sm hover:shadow-blue-200":
                  !isDarkMode,
              },
            )}
          >
            Методика оценки
          </m.div>
        </a>
        <a href={chartSociety} target="_blank" rel="noopener noreferrer">
          <m.div
            variants={fadeUp}
            initial="hidden"
            animate="visible"
            whileHover={{ scale: 1.05 }}
            whileTap={{ scale: 1 }}
            className={cn(
              "cursor-pointer rounded-xl p-6 py-6 text-lg font-medium shadow-xl transition",
              {
                "bg-[#14181d] text-blue-300 hover:shadow-blue-500/20":
                  isDarkMode,
                "border border-gray-200 bg-white text-blue-600 shadow-sm hover:shadow-blue-200":
                  !isDarkMode,
              },
            )}
          >
            График проведения
          </m.div>
        </a>
      </section>
    </div>
  );
}

export default Docs;


import { useEffect, useState } from "react";
import { useQuery, useMutation, useQueryClient } from "@tanstack/react-query";
import axios from "axios";
import Navbar from "../components/layout/Navbar/Navbar";
import { BackgroundBlobs } from "../components/ui/BackgroundBlobs/BackgroundBlobs";
import { useThemeStore } from "../stores/themeStore";
import cn from "clsx";
import { m } from "framer-motion";
import { fadeUp } from "../components/animations/fadeUp";
import Footer from "../components/layout/Footer/Footer";
import { Button } from "../components/ui/Button";
import { Link, useNavigate } from "react-router-dom";
import { useAuthStore } from "../stores/authStore";
import { INewsItem } from "../types/INews.type";
import { IOlympiad } from "../types/IOlympiads.type";

interface LocalImage {
  id: string;
  file: File;
  previewUrl: string;
}

const Admin = () => {
  const API_URL = import.meta.env.VITE_API_URL;
  const STATIC_URL = import.meta.env.VITE_STATIC_URL;
  const { token, userData, setUserData } = useAuthStore();
  const { isDarkMode } = useThemeStore();
  const queryClient = useQueryClient();

  // Состояния для новостей
  const [newsFormData, setNewsFormData] = useState({
    title: "",
    description: "",
    newsDate: "",
  });

  // Состояния для изображений
  const [localImages, setLocalImages] = useState<LocalImage[]>([]);
  const [isUploading, setIsUploading] = useState(false);
  const [uploadError, setUploadError] = useState<string | null>(null);

  // Состояния для олимпиад
  const [olympiadFormData, setOlympiadFormData] = useState({
    name: "",
    date: "",
    description: "",
  });

  // Состояния для пролистывания новостей
  const [currentNewsPage, setCurrentNewsPage] = useState(0);
  const [newsPerPage] = useState(5); // Количество новостей на странице
  const [newsContainerHeight] = useState("350px"); // Высота контейнера новостей

  const navigate = useNavigate();

  // Проверка роли администратора
  useEffect(() => {
    const checkAdminRole = async () => {
      // Если нет токена — редирект на логин
      if (!token) {
        navigate("/login");
        return;
      }

      // Если данные пользователя уже есть и роль не ADMIN — редирект
      if (userData && userData.role !== "ADMIN") {
        navigate("/");
        return;
      }

      // Если данных нет — загружаем профиль
      if (!userData) {
        try {
          const response = await axios.get(`${API_URL}/profile`, {
            headers: {
              Authorization: `Bearer ${token}`,
            },
          });

          const profileData = {
            role: response.data.role,
          };

          setUserData(profileData);

          // Проверяем роль после загрузки
          if (profileData.role !== "ADMIN") {
            navigate("/");
          }
        } catch (error) {
          console.error("Ошибка загрузки профиля:", error);
          navigate("/login");
        }
      }
    };

    checkAdminRole();
  }, [token, userData, navigate, API_URL, setUserData]);

  // Получение списка олимпиад
  const {
    data: olympiads,
    isLoading: isOlympiadsLoading,
    error: olympiadsError,
  } = useQuery<IOlympiad[]>({
    queryKey: ["olympiads"],
    queryFn: async () => {
      const response = await axios.get(`${API_URL}/olympiads`, {
        headers: {
          Authorization: `Bearer ${token}`,
        },
      });
      return response.data;
    },
  });

  // Создание олимпиады
  const createOlympiadMutation = useMutation({
    mutationFn: (newOlympiad: Omit<IOlympiad, "id">) =>
      axios.post(`${API_URL}/admin/olympiads`, newOlympiad, {
        headers: {
          Authorization: `Bearer ${token}`,
        },
      }),
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ["olympiads"] });
      setOlympiadFormData({ name: "", date: "", description: "" });
    },
  });

  // Удаление олимпиады
  const deleteOlympiadMutation = useMutation({
    mutationFn: (name: string) =>
      axios.delete(`${API_URL}/admin/olympiads/${name}`, {
        headers: {
          Authorization: `Bearer ${token}`,
        },
      }),
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ["olympiads"] });
    },
  });

  // Получение списка новостей
  const {
    data: news,
    isLoading: isNewsLoading,
    error: newsError,
  } = useQuery<INewsItem[]>({
    queryKey: ["news"],
    queryFn: async () => {
      const response = await axios.get(`${API_URL}/news`, {
        headers: {
          Authorization: `Bearer ${token}`,
        },
      });
      return response.data;
    },
  });

  // Получение списка изображений
  const {
    data: images,
    isLoading: isImagesLoading,
    error: imagesError,
    refetch: refetchImages,
  } = useQuery<string[]>({
    queryKey: ["images"],
    queryFn: async () => {
      const response = await axios.get(`${API_URL}/carousel/images`);
      return response.data;
    },
  });

  // Создание новости
  const createNewsMutation = useMutation({
    mutationFn: (newNews: Omit<INewsItem, "id">) =>
      axios.post(`${API_URL}/admin/news`, newNews, {
        headers: {
          Authorization: `Bearer ${token}`,
        },
      }),
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ["news"] });
      setNewsFormData({ title: "", description: "", newsDate: "" });
      setCurrentNewsPage(0); // Сбрасываем на первую страницу при добавлении новой новости
    },
  });

  // Удаление новости
  const deleteNewsMutation = useMutation({
    mutationFn: (id: number) =>
      axios.delete(`${API_URL}/admin/news/${id}`, {
        headers: {
          Authorization: `Bearer ${token}`,
        },
      }),
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ["news"] });
      // Если после удаления текущая страница стала пустой, переходим на предыдущую
      if (
        news &&
        currentNewsPage > 0 &&
        (news.length - 1) % newsPerPage === 0
      ) {
        setCurrentNewsPage(currentNewsPage - 1);
      }
    },
  });

  // Удаление изображения
  const deleteImageMutation = useMutation({
    mutationFn: async (fullImageUrl: string) => {
      // Извлекаем часть после "/uploads/"
      const uploadPath = fullImageUrl.split("/uploads/").pop();

      if (!uploadPath) {
        throw new Error("Неверный формат URL изображения");
      }

      await axios.delete(`${API_URL}/admin/carousel/${uploadPath}`, {
        headers: {
          Authorization: `Bearer ${token}`,
        },
      });
    },
    onSuccess: () => {
      refetchImages();
    },
  });

  // Функция для выгрузки пользователей в Excel
  const exportUsersToExcel = async () => {
    try {
      const response = await axios.get(`${API_URL}/admin/export-users`, {
        headers: {
          Authorization: `Bearer ${token}`,
        },
        responseType: "blob",
      });

      const url = window.URL.createObjectURL(new Blob([response.data]));
      const link = document.createElement("a");
      link.href = url;
      link.setAttribute("download", "users_export.xlsx");
      document.body.appendChild(link);
      link.click();
      link.remove();
    } catch (error) {
      console.error("Ошибка выгрузки:", error);
      alert("Не удалось выгрузить файл");
    }
  };

  // Обработчики для новостей
  const handleNewsInputChange = (
    e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>,
  ) => {
    const { name, value } = e.target;
    setNewsFormData((prev) => ({ ...prev, [name]: value }));
  };

  const handleNewsSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    createNewsMutation.mutate(newsFormData);
  };

  // Обработчики для изображений
  const handleImageSelect = (e: React.ChangeEvent<HTMLInputElement>) => {
    if (e.target.files && e.target.files.length > 0) {
      const files = Array.from(e.target.files);

      const newImages = files.map((file) => ({
        id: Math.random().toString(36).substring(2, 9),
        file,
        previewUrl: URL.createObjectURL(file),
      }));

      setLocalImages((prev) => [...prev, ...newImages]);
      e.target.value = "";
    }
  };

  const handleRemoveImage = (id: string) => {
    const imageToRemove = localImages.find((img) => img.id === id);
    if (imageToRemove) {
      URL.revokeObjectURL(imageToRemove.previewUrl);
    }

    setLocalImages((prev) => prev.filter((img) => img.id !== id));
  };

  const handleUploadImages = async () => {
    if (localImages.length === 0) return;

    setIsUploading(true);
    setUploadError(null);

    try {
      const formData = new FormData();
      localImages.forEach((image) => {
        formData.append("files", image.file);
      });

      await axios.post(`${API_URL}/admin/carousel/upload`, formData, {
        headers: {
          Authorization: `Bearer ${token}`,
        },
      });

      await refetchImages();
      setLocalImages([]);
    } catch (error) {
      console.error("Ошибка загрузки изображений:", error);
      setUploadError("Не удалось загрузить изображения");
    } finally {
      setIsUploading(false);
    }
  };

  const handleDeleteImage = (imageUrl: string) => {
    if (confirm("Вы уверены, что хотите удалить это изображение?")) {
      deleteImageMutation.mutate(imageUrl);
    }
  };

  // Очистка превью при размонтировании компонента
  useEffect(() => {
    return () => {
      localImages.forEach((image) => {
        URL.revokeObjectURL(image.previewUrl);
      });
    };
  }, [localImages]);

  // Функции для пагинации новостей
  const totalNewsPages = news ? Math.ceil(news.length / newsPerPage) : 0;
  const currentNews = news
    ? news.slice(
        currentNewsPage * newsPerPage,
        (currentNewsPage + 1) * newsPerPage,
      )
    : [];

  const handleNextNewsPage = () => {
    if (currentNewsPage < totalNewsPages - 1) {
      setCurrentNewsPage(currentNewsPage + 1);
    }
  };

  const handlePrevNewsPage = () => {
    if (currentNewsPage > 0) {
      setCurrentNewsPage(currentNewsPage - 1);
    }
  };

  if (isNewsLoading) return <div>Загрузка...</div>;
  if (newsError)
    return <div>Ошибка загрузки новостей: {newsError.message}</div>;

  // Обработчики для олимпиад
  const handleOlympiadInputChange = (
    e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>,
  ) => {
    const { name, value } = e.target;
    setOlympiadFormData((prev) => ({ ...prev, [name]: value }));
  };

  const handleOlympiadSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    createOlympiadMutation.mutate(olympiadFormData);
  };

  return (
    <div
      className={cn("min-h-screen w-screen font-sans", {
        "bg-[#0b0f1a] text-white": isDarkMode,
        "bg-gray-50/20 text-gray-900": !isDarkMode,
      })}
    >
      <BackgroundBlobs />
      <Navbar />

      <section className="flex flex-col items-center justify-center px-6 py-12">
        <h2
          className={cn("mb-12 text-center text-4xl font-bold md:text-5xl", {
            "text-white": isDarkMode,
            "text-gray-900": !isDarkMode,
          })}
        >
          Панель администратора
        </h2>

        {/* Кнопка выгрузки пользователей */}
        <div className="mb-8 flex justify-center">
          <m.div variants={fadeUp} initial="hidden" animate="visible">
            <Button onClick={exportUsersToExcel} className="px-6 py-3">
              Выгрузить пользователей в таблицу Excel
            </Button>
          </m.div>
        </div>

        <div className="flex w-full flex-col gap-8 lg:flex-row">
          {/* Колонка новостей */}
          <div className="flex-1">
            <m.div
              variants={fadeUp}
              initial="hidden"
              animate="visible"
              className="space-y-8"
            >
              <h3
                className={cn("text-center text-3xl font-bold", {
                  "text-white": isDarkMode,
                  "text-gray-900": !isDarkMode,
                })}
              >
                Управление новостями
              </h3>

              <div
                className={cn("rounded-2xl p-6", {
                  "bg-[#0b0f1a] outline-2 outline-blue-900": isDarkMode,
                  "bg-white shadow-md outline-2 outline-blue-500": !isDarkMode,
                })}
              >
                <h4 className="mb-4 text-center text-xl font-semibold">
                  Создание новости
                </h4>

                <form onSubmit={handleNewsSubmit} className="space-y-4">
                  <div>
                    <label className="mb-2 block font-medium">Заголовок</label>
                    <input
                      type="text"
                      name="title"
                      value={newsFormData.title}
                      onChange={handleNewsInputChange}
                      className={cn("w-full rounded border p-2", {
                        "border-gray-700 bg-gray-800": isDarkMode,
                        "border-gray-300 bg-white": !isDarkMode,
                      })}
                      required
                    />
                  </div>

                  <div>
                    <label className="mb-2 block font-medium">Описание</label>
                    <textarea
                      name="description"
                      value={newsFormData.description}
                      onChange={handleNewsInputChange}
                      className={cn("w-full rounded border p-2", {
                        "border-gray-700 bg-gray-800": isDarkMode,
                        "border-gray-300 bg-white": !isDarkMode,
                      })}
                      rows={3}
                      required
                    />
                  </div>

                  <div>
                    <label className="mb-2 block font-medium">
                      Дата новости
                    </label>
                    <input
                      type="date"
                      name="newsDate"
                      value={newsFormData.newsDate}
                      onChange={handleNewsInputChange}
                      className={cn("w-full rounded border p-2", {
                        "border-gray-700 bg-gray-800": isDarkMode,
                        "border-gray-300 bg-white": !isDarkMode,
                      })}
                      required
                    />
                  </div>

                  <div className="pt-2">
                    <Button
                      type="submit"
                      disabled={createNewsMutation.isPending}
                      className="w-full"
                    >
                      {createNewsMutation.isPending
                        ? "Создание..."
                        : "Создать новость"}
                    </Button>
                  </div>
                </form>
              </div>

              <div
                className={cn("rounded-2xl p-6", {
                  "bg-[#0b0f1a] outline-2 outline-blue-900": isDarkMode,
                  "bg-white shadow-md outline-2 outline-blue-500": !isDarkMode,
                })}
              >
                <h4 className="mb-4 text-center text-xl font-semibold">
                  Список новостей
                </h4>
                {news?.length === 0 ? (
                  <p className="text-center">Новостей нет</p>
                ) : (
                  <div className="space-y-4">
                    {/* Контейнер новостей с фиксированной высотой */}
                    <div
                      className="overflow-y-auto"
                      style={{ height: newsContainerHeight }}
                    >
                      <div className="space-y-4 pr-2">
                        {currentNews.map((item) => (
                          <div
                            key={item.id}
                            className={cn("rounded-lg border p-4", {
                              "border-gray-700": isDarkMode,
                              "border-gray-200": !isDarkMode,
                            })}
                          >
                            <h5 className="mb-2 text-lg font-bold">
                              {item.title}
                            </h5>
                            <p className="mb-2 text-sm text-gray-500">
                              Дата:{" "}
                              {new Date(item.newsDate).toLocaleDateString(
                                "ru-RU",
                              )}
                            </p>
                            <p className="mb-3">{item.description}</p>
                            <div>
                              <Button
                                size="sm"
                                onClick={() =>
                                  deleteNewsMutation.mutate(item.id)
                                }
                                disabled={deleteNewsMutation.isPending}
                                className="bg-red-500 hover:bg-red-600"
                              >
                                {deleteNewsMutation.isPending
                                  ? "Удаление..."
                                  : "Удалить"}
                              </Button>
                            </div>
                          </div>
                        ))}
                      </div>
                    </div>

                    {/* Пагинация */}
                    {totalNewsPages > 1 && (
                      <div className="flex items-center justify-between pt-4">
                        <Button
                          onClick={handlePrevNewsPage}
                          disabled={currentNewsPage === 0}
                        >
                          Назад
                        </Button>

                        <span className="text-sm">
                          Страница {currentNewsPage + 1} из {totalNewsPages}
                        </span>

                        <Button
                          onClick={handleNextNewsPage}
                          disabled={currentNewsPage === totalNewsPages - 1}
                        >
                          Вперед
                        </Button>
                      </div>
                    )}
                  </div>
                )}
              </div>
            </m.div>
          </div>

          {/* Колонка изображений */}
          <div className="flex-1">
            <m.div
              variants={fadeUp}
              initial="hidden"
              animate="visible"
              className="space-y-8"
            >
              <h3
                className={cn("text-center text-3xl font-bold", {
                  "text-white": isDarkMode,
                  "text-gray-900": !isDarkMode,
                })}
              >
                Управление изображениями
              </h3>

              <div
                className={cn("rounded-2xl p-6", {
                  "bg-[#0b0f1a] outline-2 outline-blue-900": isDarkMode,
                  "bg-white shadow-md outline-2 outline-blue-500": !isDarkMode,
                })}
              >
                <h4 className="mb-4 text-center text-xl font-semibold">
                  Загрузка изображений
                </h4>
                <div className="space-y-4">
                  <input
                    type="file"
                    multiple
                    accept="image/*"
                    onChange={handleImageSelect}
                    className={cn("w-full rounded border p-2", {
                      "border-gray-700 bg-gray-800": isDarkMode,
                      "border-gray-300 bg-white": !isDarkMode,
                    })}
                  />
                  {localImages.length > 0 && (
                    <div className="flex items-center justify-between">
                      <p className="text-sm">
                        Выбрано изображений: {localImages.length}
                      </p>
                      <Button
                        onClick={handleUploadImages}
                        disabled={isUploading || localImages.length === 0}
                      >
                        {isUploading ? "Загрузка..." : "Загрузить"}
                      </Button>
                    </div>
                  )}
                  {uploadError && (
                    <p className="text-sm text-red-500">{uploadError}</p>
                  )}
                </div>
              </div>

              <div
                className={cn("rounded-2xl p-6", {
                  "bg-[#0b0f1a] outline-2 outline-blue-900": isDarkMode,
                  "bg-white shadow-md outline-2 outline-blue-500": !isDarkMode,
                })}
              >
                <h4 className="mb-4 text-center text-xl font-semibold">
                  Предпросмотр перед загрузкой
                </h4>
                {localImages.length === 0 ? (
                  <p className="text-center">Нет выбранных изображений</p>
                ) : (
                  <div className="grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4">
                    {localImages.map((image) => (
                      <div
                        key={image.id}
                        className={cn("relative rounded-lg border", {
                          "border-gray-700": isDarkMode,
                          "border-gray-200": !isDarkMode,
                        })}
                      >
                        <img
                          src={image.previewUrl}
                          alt={`Preview ${image.id}`}
                          className="h-full w-full object-cover"
                        />
                        <div className="bg-opacity-50 absolute right-0 bottom-0 left-0 bg-black p-2 text-white">
                          <p className="truncate text-xs">{image.file.name}</p>
                          <p className="text-xs">
                            {(image.file.size / 1024).toFixed(1)} KB
                          </p>
                        </div>
                        <Button
                          size="sm"
                          className="absolute top-2 right-2"
                          onClick={() => handleRemoveImage(image.id)}
                        >
                          ×
                        </Button>
                      </div>
                    ))}
                  </div>
                )}
              </div>

              <div
                className={cn("rounded-2xl p-6", {
                  "bg-[#0b0f1a] outline-2 outline-blue-900": isDarkMode,
                  "bg-white shadow-md outline-2 outline-blue-500": !isDarkMode,
                })}
              >
                <h4 className="mb-4 text-center text-xl font-semibold">
                  Загруженные изображения
                </h4>
                {isImagesLoading ? (
                  <div>Загрузка изображений...</div>
                ) : imagesError ? (
                  <div className="text-red-500">
                    Ошибка загрузки: {imagesError.message}
                  </div>
                ) : images?.length === 0 ? (
                  <p className="text-center">Нет загруженных изображений</p>
                ) : (
                  <div className="grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4">
                    {images?.map((imageUrl, index) => (
                      <div
                        key={index}
                        className={cn("relative rounded-lg border", {
                          "border-gray-700": isDarkMode,
                          "border-gray-200": !isDarkMode,
                        })}
                      >
                        <img
                          src={`${STATIC_URL}${imageUrl}`}
                          alt={`Uploaded ${index}`}
                          crossOrigin="anonymous"
                          className="h-full w-full object-cover"
                        />
                        <Button
                          size="sm"
                          className="absolute top-2 right-2"
                          onClick={() => handleDeleteImage(imageUrl)}
                          disabled={deleteImageMutation.isPending}
                        >
                          ×
                        </Button>
                      </div>
                    ))}
                  </div>
                )}
              </div>
            </m.div>
          </div>

          {/* Колонка олимпиад */}
          <div className="flex-1">
            <m.div
              variants={fadeUp}
              initial="hidden"
              animate="visible"
              className="space-y-8"
            >
              <h3
                className={cn("text-center text-3xl font-bold", {
                  "text-white": isDarkMode,
                  "text-gray-900": !isDarkMode,
                })}
              >
                Управление олимпиадами
              </h3>

              <div
                className={cn("rounded-2xl p-6", {
                  "bg-[#0b0f1a] outline-2 outline-blue-900": isDarkMode,
                  "bg-white shadow-md outline-2 outline-blue-500": !isDarkMode,
                })}
              >
                <h4 className="mb-4 text-center text-xl font-semibold">
                  Создание олимпиады
                </h4>

                <form onSubmit={handleOlympiadSubmit} className="space-y-4">
                  <div>
                    <label className="mb-2 block font-medium">Название</label>
                    <input
                      type="text"
                      name="name"
                      value={olympiadFormData.name}
                      onChange={handleOlympiadInputChange}
                      className={cn("w-full rounded border p-2", {
                        "border-gray-700 bg-gray-800": isDarkMode,
                        "border-gray-300 bg-white": !isDarkMode,
                      })}
                      required
                    />
                  </div>

                  <div>
                    <label className="mb-2 block font-medium">
                      Дата проведения
                    </label>
                    <input
                      type="date"
                      name="date"
                      value={olympiadFormData.date}
                      onChange={handleOlympiadInputChange}
                      className={cn("w-full rounded border p-2", {
                        "border-gray-700 bg-gray-800": isDarkMode,
                        "border-gray-300 bg-white": !isDarkMode,
                      })}
                      required
                    />
                  </div>

                  <div>
                    <label className="mb-2 block font-medium">Описание</label>
                    <textarea
                      name="description"
                      value={olympiadFormData.description}
                      onChange={handleOlympiadInputChange}
                      className={cn("w-full rounded border p-2", {
                        "border-gray-700 bg-gray-800": isDarkMode,
                        "border-gray-300 bg-white": !isDarkMode,
                      })}
                      rows={3}
                      required
                    />
                  </div>

                  <div className="pt-2">
                    <Button
                      type="submit"
                      disabled={createOlympiadMutation.isPending}
                      className="w-full"
                    >
                      {createOlympiadMutation.isPending
                        ? "Создание..."
                        : "Создать олимпиаду"}
                    </Button>
                  </div>
                </form>
              </div>

              <div
                className={cn("rounded-2xl p-6", {
                  "bg-[#0b0f1a] outline-2 outline-blue-900": isDarkMode,
                  "bg-white shadow-md outline-2 outline-blue-500": !isDarkMode,
                })}
              >
                <h4 className="mb-4 text-center text-xl font-semibold">
                  Список олимпиад
                </h4>
                {isOlympiadsLoading ? (
                  <p className="text-center">Загрузка...</p>
                ) : olympiadsError ? (
                  <p className="text-center text-red-500">
                    Ошибка: {olympiadsError.message}
                  </p>
                ) : olympiads?.length === 0 ? (
                  <p className="text-center">Нет олимпиад</p>
                ) : (
                  <div className="space-y-4">
                    {olympiads?.map((olympiad) => (
                      <div
                        key={olympiad.id}
                        className={cn("rounded-lg border p-4", {
                          "border-gray-700": isDarkMode,
                          "border-gray-200": !isDarkMode,
                        })}
                      >
                        <h5 className="mb-2 text-lg font-bold">
                          {olympiad.name}
                        </h5>
                        <p className="mb-2 text-sm text-gray-500">
                          Дата:{" "}
                          {new Date(olympiad.date).toLocaleDateString("ru-RU")}
                        </p>
                        <p className="mb-3">{olympiad.description}</p>
                        <div>
                          <Button
                            size="sm"
                            onClick={() =>
                              deleteOlympiadMutation.mutate(olympiad.name)
                            }
                            disabled={deleteOlympiadMutation.isPending}
                            className="bg-red-500 hover:bg-red-600"
                          >
                            {deleteOlympiadMutation.isPending
                              ? "Удаление..."
                              : "Удалить"}
                          </Button>
                        </div>
                      </div>
                    ))}
                  </div>
                )}
              </div>
            </m.div>
          </div>
        </div>

        <div className="mt-8 flex justify-center">
          <Link to="/">
            <Button className="px-7 py-3">Вернуться на главную</Button>
          </Link>
        </div>
      </section>

      <Footer />
    </div>
  );
};

export default Admin;


import { useState } from "react";
import cn from "clsx";
import { m } from "framer-motion";
import { useThemeStore } from "../stores/themeStore";
import { BackgroundBlobs } from "../components/ui/BackgroundBlobs/BackgroundBlobs";
import Navbar from "../components/layout/Navbar/Navbar";
import { fadeUp } from "../components/animations/fadeUp";
import { Button } from "../components/ui/Button";
import { Link } from "react-router-dom";
import Footer from "../components/layout/Footer/Footer";
import zadachi from "/public/zadachi.pdf";
import { rankings2023 } from "../../data/mockData";

type AcademicYear = "2023-2024" | "2024-2025";

interface TaskItem {
  id: number;
  title: string;
  description: string;
  fileUrl: string;
  fileSize: string;
}

interface YearData {
  tasks: TaskItem[];
  winners: typeof rankings2023;
}

function Archive() {
  const { isDarkMode } = useThemeStore();
  const [selectedYear, setSelectedYear] = useState<AcademicYear>("2024-2025");

  // Данные с заданиями и победителями
  const archiveData: Record<AcademicYear, YearData> = {
    "2023-2024": {
      tasks: [
        {
          id: 1,
          title: "Задания по информационной безопасности",
          description: "Отборочный этап 2023-2024 учебного года",
          fileUrl: zadachi,
          fileSize: "2.4 MB",
        },
      ],
      winners: rankings2023,
    },
    "2024-2025": {
      tasks: [
        {
          id: 1,
          title: "Задания по информационной безопасности",
          description: "Отборочный этап 2024-2025 учебного года",
          fileUrl: zadachi,
          fileSize: "2.7 MB",
        },
      ],
      winners: rankings2023,
    },
  };

  const currentData = archiveData[selectedYear];
  const currentTasks = currentData.tasks;
  const currentWinners = currentData.winners;

  // Фильтр победителей (исключаем участников без статуса победителя/призера)
  const winners = currentWinners.filter(
    (participant) => participant.status !== "Участник",
  );

  return (
    <div
      className={cn("min-h-screen w-screen font-sans", {
        "bg-[#0b0f1a] text-white": isDarkMode,
        "bg-gray-50/20 text-gray-900": !isDarkMode,
      })}
    >
      <BackgroundBlobs />
      <Navbar />

      <section className="flex items-center justify-center px-6 py-12">
        <div className="w-10xl mx-auto max-w-6xl">
          <m.div
            variants={fadeUp}
            initial="hidden"
            animate="visible"
            className="space-y-8"
          >
            <h2
              className={cn("text-center text-4xl font-bold md:text-5xl", {
                "text-white": isDarkMode,
                "text-gray-900": !isDarkMode,
              })}
            >
              Архив заданий
            </h2>

            <div
              className={cn("rounded-2xl p-8 text-lg", {
                "bg-[#0b0f1a] outline-2 outline-blue-900": isDarkMode,
                "bg-white shadow-md outline-2 outline-blue-500": !isDarkMode,
              })}
            >
              <p className="mb-6 text-center">
                На этой странице вы можете ознакомиться с заданиями отборочного
                этапа Олимпиады школьников «Университет цифровой полиции» за
                предыдущие годы.
              </p>

              {/* Выбор учебного года */}
              <div className="mb-8">
                <label
                  htmlFor="year-select"
                  className="text-md mb-3 block text-center font-medium"
                >
                  Выберите учебный год:
                </label>
                <div className="flex justify-center">
                  <select
                    id="year-select"
                    value={selectedYear}
                    onChange={(e) =>
                      setSelectedYear(e.target.value as AcademicYear)
                    }
                    className={cn(
                      "w-full max-w-xs rounded-lg border px-4 py-3 text-base focus:ring-2 focus:outline-none",
                      {
                        "border-blue-700 bg-gray-800 text-white focus:ring-blue-500":
                          isDarkMode,
                        "border-blue-300 bg-white text-gray-900 focus:ring-blue-400":
                          !isDarkMode,
                      },
                    )}
                  >
                    <option value="2024-2025">2024-2025</option>
                    <option value="2023-2024">2023-2024</option>
                  </select>
                </div>
              </div>

              {/* Задания отборочного этапа */}
              <div className="mb-12">
                <h3
                  className={cn("mb-6 text-center text-2xl font-semibold", {
                    "text-white": isDarkMode,
                    "text-blue-600": !isDarkMode,
                  })}
                >
                  Задания отборочного этапа {selectedYear} учебного года
                </h3>

                <div className="grid gap-6">
                  {currentTasks.map((task, index) => (
                    <m.div
                      key={task.id}
                      initial={{ opacity: 0, y: 20 }}
                      animate={{ opacity: 1, y: 0 }}
                      transition={{ delay: index * 0.1 }}
                      className={cn(
                        "rounded-xl border-2 p-6 transition-all hover:shadow-lg",
                        {
                          "border-blue-600 bg-blue-900/20 hover:bg-blue-900/30":
                            isDarkMode,
                          "border-blue-400 bg-blue-50 hover:bg-blue-100":
                            !isDarkMode,
                        },
                      )}
                    >
                      <div className="flex items-start justify-between">
                        <div className="flex-1">
                          <h4
                            className={cn("mb-2 text-xl font-bold", {
                              "text-blue-300": isDarkMode,
                              "text-blue-700": !isDarkMode,
                            })}
                          >
                            {task.title}
                          </h4>
                          <p
                            className={cn("mb-3", {
                              "text-gray-300": isDarkMode,
                              "text-gray-600": !isDarkMode,
                            })}
                          >
                            {task.description}
                          </p>
                          <p
                            className={cn("text-sm", {
                              "text-gray-400": isDarkMode,
                              "text-gray-500": !isDarkMode,
                            })}
                          >
                            Размер файла: {task.fileSize}
                          </p>
                        </div>
                        <a
                          href={task.fileUrl}
                          target="_blank"
                          rel="noopener noreferrer"
                          className="ml-4"
                        >
                          <Button
                            className={cn("whitespace-nowrap", {
                              "bg-blue-600 hover:bg-blue-700": isDarkMode,
                              "bg-blue-500 hover:bg-blue-600": !isDarkMode,
                            })}
                          >
                            Просмотреть
                          </Button>
                        </a>
                      </div>
                    </m.div>
                  ))}
                </div>
              </div>

              {/* Победители и призеры */}
              <div className="mb-8">
                <h3
                  className={cn("mb-6 text-center text-2xl font-semibold", {
                    "text-white": isDarkMode,
                    "text-blue-600": !isDarkMode,
                  })}
                >
                  Победители и призеры {selectedYear} учебного года
                </h3>

                {/* Блок с работами победителей */}
                {winners.length > 0 && (
                  <m.div
                    initial={{ opacity: 0, y: 20 }}
                    animate={{ opacity: 1, y: 0 }}
                    transition={{ duration: 0.5 }}
                    className={cn(
                      "mb-6 rounded-2xl border border-blue-600 p-6",
                      {
                        "bg-gradient-to-br from-[#0f172a] via-[#101b36] to-[#14213d]":
                          isDarkMode,
                        "bg-gradient-to-br from-blue-50 to-blue-100":
                          !isDarkMode,
                      },
                    )}
                  >
                    <div className="mb-4 flex flex-col items-center">
                      <h3 className="text-2xl font-bold">
                        Проекты победителей
                      </h3>
                    </div>

                    <div className="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3">
                      {winners.map((winner, index) => (
                        <m.div
                          key={`winner-${winner.id}`}
                          initial={{ opacity: 0, y: 20 }}
                          animate={{ opacity: 1, y: 0 }}
                          transition={{ delay: index * 0.1 }}
                          className={cn(
                            "rounded-lg p-4 transition-all hover:shadow-lg",
                            {
                              "bg-blue-900/20 hover:bg-blue-900/30": isDarkMode,
                              "bg-blue-200/40": !isDarkMode,
                            },
                          )}
                        >
                          <h4 className="text-lg font-bold text-blue-400">
                            {winner.status}
                          </h4>
                          <h5 className="text-lg font-semibold">
                            {winner.lastName} {winner.firstName}{" "}
                            {winner.middleName}
                          </h5>
                          <p className="text-md opacity-80">{winner.region}</p>
                          <p className="my-2 font-bold">
                            {winner.score} баллов
                          </p>
                          {winner.details ? (
                            <a
                              href={winner.details}
                              target="_blank"
                              rel="noopener noreferrer"
                            >
                              <Button
                                className={cn("mt-2 w-full text-sm", {
                                  "bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400":
                                    isDarkMode,
                                  "bg-gradient-to-r from-blue-500 to-blue-400 hover:from-blue-400 hover:to-blue-300":
                                    !isDarkMode,
                                })}
                              >
                                Посмотреть работу
                              </Button>
                            </a>
                          ) : (
                            <p className="mt-2 text-sm opacity-70">
                              Работа не загружена
                            </p>
                          )}
                        </m.div>
                      ))}
                    </div>
                  </m.div>
                )}
              </div>

              {/* Информационное сообщение */}
              <div
                className={cn("rounded-lg p-4 text-center", {
                  "bg-blue-900/20": isDarkMode,
                  "bg-blue-100": !isDarkMode,
                })}
              >
                <p
                  className={cn("font-medium", {
                    "text-blue-300": isDarkMode,
                    "text-blue-700": !isDarkMode,
                  })}
                >
                  Все задания представлены в формате PDF
                </p>
              </div>
            </div>

            <div className="flex justify-center gap-4">
              <Link to="/">
                <Button className="px-7 py-3">Вернуться на главную</Button>
              </Link>
            </div>
          </m.div>
        </div>
      </section>

      <Footer />
    </div>
  );
}

export default Archive;


import Navbar from "../components/layout/Navbar/Navbar";
import { BackgroundBlobs } from "../components/ui/BackgroundBlobs/BackgroundBlobs";
import { useThemeStore } from "../stores/themeStore";
import cn from "clsx";
import { m } from "framer-motion";
import { fadeUp } from "../components/animations/fadeUp";
import Footer from "../components/layout/Footer/Footer";
import { Button } from "../components/ui/Button";
import { Link } from "react-router-dom";

function Consent() {
  const { isDarkMode } = useThemeStore();

  return (
    <div
      className={cn("min-h-screen w-screen font-sans", {
        "bg-[#0b0f1a] text-white": isDarkMode,
        "bg-gray-50/20 text-gray-900": !isDarkMode,
      })}
    >
      <BackgroundBlobs />
      <Navbar />

      <section className="flex items-center justify-center px-6 py-12">
        <div className="w-10xl mx-auto max-w-4xl">
          <m.div
            variants={fadeUp}
            initial="hidden"
            animate="visible"
            className="space-y-8"
          >
            <h2
              className={cn("text-center text-4xl font-bold md:text-5xl", {
                "text-white": isDarkMode,
                "text-gray-900": !isDarkMode,
              })}
            >
              Согласие на обработку персональных данных
            </h2>

            <div
              className={cn("rounded-2xl p-8 text-lg", {
                "bg-[#0b0f1a] outline-2 outline-blue-900": isDarkMode,
                "bg-white shadow-md outline-2 outline-blue-500": !isDarkMode,
              })}
            >
              <h3 className="mb-6 text-center text-2xl font-semibold">
                Политика обработки персональных данных
              </h3>

              <div className="mb-6 space-y-4">
                <p>
                  1. Субъектом персональных данных является участник Олимпиады
                  (законный представитель участника). Законным представителем
                  является лицо, уполномоченное представлять интерес субъекта, в
                  частности, когда субъект не может это сделать в силу возраста.
                  Оператором является Московский университет МВД России имени
                  В.Я. Кикотя (далее – Университет).{" "}
                </p>
                <p>
                  2. Обработка Университетом персональных данных осуществляется
                  с использованием средств автоматизации или без использования
                  таких средств, в форме проведения следующих действий: сбор,
                  запись, систематизация, накопление, хранение, уточнение
                  (обновление, изменение), извлечение, использование, передача
                  (распространение, предоставление, доступ), обезличивание,
                  блокирование, удаление, уничтожение, в том числе
                  распространение (раскрытие неопределенному кругу лиц в
                  соответствии со статьей 10.1 Федерального закона от 27.07.2006
                  г. №152-ФЗ «О персональных данных») персональных данных.
                  Оператор может проверить достоверность предоставленных
                  персональных данных, в том числе с использованием услуг других
                  операторов без уведомления Субъекта.
                </p>
                <p>3. Обработка персональных данных осуществляется с целью:</p>
                - выполнения процедуры приема заявки на участие в Олимпиаде,
                формирования статистической отчетности;
                <br />
                - формирования и ведения федеральных информационных систем, а
                также взаимодействия с федеральными органами.
                <br />
                - подготовки итоговых рейтинговых таблиц, размещения информации
                в сети Интернет о результатах Олимпиады.
                <br />
                <p>
                  4. Обработка персональных данных осуществляется в следующем
                  объеме:
                </p>
                - сведения о страховом номере индивидуального лицевого счета в
                системе индивидуального (персонифицированного) учета (номер
                страхового свидетельства обязательного пенсионного страхования);
                <br />
                - реквизиты документа, удостоверяющего личность;
                <br />
                - фамилия, имя, отчество (отчество при наличии);
                <br />
                - дата рождения;
                <br />
                - сведения об образовании, наименование образовательного
                учреждения, курс обучения;
                <br />
                - почтовый адрес и (или) электронный адрес;
                <br />
                - номер контактного телефона;
                <br />
                - личная подпись.
                <br />
                <p>
                  5. Субъект персональных данных по письменному запросу имеет
                  право на получение информации, касающейся обработки его
                  персональных данных (в соответствии со ст.14 федерального
                  закона от 27.07.2006 г. № 152-ФЗ «О персональных данных»).
                </p>
                <p>
                  6. Обработка персональных данных прекращается при достижении
                  целей обработки. Субъект персональных данных (представитель)
                  имеет право отозвать согласие на обработку персональных данных
                  путем направления соответствующего заявления в адрес
                  Университета.
                </p>
                <p>
                  7. Субъект персональных данных несет ответственность за
                  достоверность представленных сведений.
                </p>
                <p>
                  8. Настоящее согласие действует на период проведения
                  Олимпиады, а также по истечению срока в архивных целях на
                  срок, предусмотренный законодательством Российской Федерации.
                </p>
              </div>
            </div>
            <div className="flex justify-center">
              <Link to="/registration">
                <Button className="px-7 py-3">Продолжить регистрацию</Button>
              </Link>
            </div>
          </m.div>
        </div>
      </section>

      <Footer />
    </div>
  );
}

export default Consent;


import Navbar from "../components/layout/Navbar/Navbar";
import { BackgroundBlobs } from "../components/ui/BackgroundBlobs/BackgroundBlobs";
import { useThemeStore } from "../stores/themeStore";
import cn from "clsx";

function Developers() {
  const { isDarkMode } = useThemeStore();

  return (
    <div
      className={cn("min-h-screen w-screen font-sans", {
        "bg-[#0b0f1a] text-white": isDarkMode,
        "bg-gray-50 text-gray-900": !isDarkMode,
      })}
    >
      <BackgroundBlobs />
      <Navbar />
    </div>
  );
}

export default Developers;


import Navbar from "../../components/layout/Navbar/Navbar";
import News from "./Sections/News/News";
import About from "./Sections/Info";
import Footer from "../../components/layout/Footer/Footer";
import { BackgroundBlobs } from "../../components/ui/BackgroundBlobs/BackgroundBlobs";
import { fadeUp } from "../../components/animations/fadeUp";
import { m } from "framer-motion";
import { Link, useNavigate } from "react-router-dom";
import { useThemeStore } from "../../stores/themeStore";
import cn from "clsx";
import Carousel from "./Sections/Carousel";
import Background from "../../components/ui/Background";

const olympiads = [
  {
    name: "Информационная безопасность",
    description: "Дисциплины: Информатика и ИКТ, Математика и Физика",
    fullDescription:
      "Олимпиада школьников «Университет цифровой полиции» по профилю «Информационная безопасность» провидится с 2024 года. Ее ключевой целью является выявление у учащихся 10-11 классов технического мышления и интереса к научно-исследовательской деятельности.\n\nОлимпиада способствует выявлению творческих, мыслящих молодых людей, способных решать комплексные задачи по обеспечению конфиденциальности, целостности и доступности информации.\n\nЗадания данного профиля Олимпиады формируются методической комиссией на основании обязательного минимума содержания основных образовательных программ предмета «Математика», «Физика» и «Информатика» уровня общеобразовательной программы, с учетом специфики выполняемых задач по обеспечению безопасности информации в сфере внутренних дел.",
    dates: {
      qualifying: "24 ноября - 14 декабря 2025",
      final: "1 февраля - 7 марта 2026",
      finalEnd: "14 марта 2026",
    },
    organizer: "Учебно-научный комплекс информационных технологий",
    address: "г. Москва, ул. Коптевская, д. 63",
  },
  {
    name: "Обществознание",
    description: "Дисциплины: обществознание",
    fullDescription:
      "Олимпиада школьников «Университет цифровой полиции» по профилю «Обществознание» проводится с 2025 года среди учащихся 10-11х классов, обладающих выдающимися способностями и проявляющих глубокий интерес к социально-гуманитарному знанию.\n\nОлимпиада способствует выявлению наиболее одаренных, творческих, самостоятельно мыслящих молодых людей, в том числе способных решать комплексные задачи, стоящие перед современной правоохранительной системой.\n\nЗадания олимпиады формируются методической комиссией на основе обязательного минимума содержания основных образовательных программ по предмету «Обществознание» (с учетом интегрированности в них нескольких направлений социально-гуманитарного знания) с углубленным вниманием к правоохранительной тематике. В связи с этим в задания включаются как вопросы по основным отраслям российского права, так и выявляющие знания участников о государстве (в том числе правоохранительной системе как ключевом элементе механизма государства), экономическом и политическом устройстве общества, социальных отношениях",
    dates: {
      qualifying: "24 ноября - 14 декабря 2025",
      final: "1 февраля - 14 марта 2026",
      finalEnd: "21 марта 2026",
    },
    organizer: "Кафедра теории государства и права",
    address: "г. Москва, ул. Академика Волгина, д. 12",
  },
];

export default function Home() {
  const { isDarkMode } = useThemeStore();
  const navigate = useNavigate();

  return (
    <div
      className={cn(
        "relative min-h-screen w-screen overflow-hidden font-sans",
        {
          "bg-[#0b0f1a] text-white": isDarkMode,
          "bg-gray-50 text-gray-900": !isDarkMode,
        },
      )}
    >
      <Background />

      <BackgroundBlobs />

      <Navbar />

      {/* Основной блок с тремя колонками */}
      <section className={"relative z-10 px-6 py-12"}>
        <div className="w-10xl mx-auto grid grid-cols-1 justify-center gap-8 md:grid-cols-3">
          {/* Левая колонка - название, логотип и профили олимпиад */}
          <div className="ml-8 flex flex-col">
            <m.div
              variants={fadeUp}
              initial="hidden"
              animate="visible"
              className="max-w-xl"
            >
              <h1 className="mb-6 text-4xl leading-tight font-bold md:block md:text-5xl">
                Университет{" "}
                <span className="text-blue-600">Цифровой Полиции</span>
              </h1>

              <p className={"mb-8 text-xl"}>Право. Технологии. Безопасность.</p>

              {/* Блок профилей олимпиад */}
              <m.div
                variants={fadeUp}
                initial="hidden"
                animate="visible"
                transition={{ delay: 0.3 }}
                className={cn(
                  "mt-8 rounded-2xl p-6 backdrop-blur-sm transition-all duration-300",
                  {
                    "bg-[#161b22]/50": isDarkMode,
                    "border border-gray-200 bg-white/95 shadow-md hover:shadow-lg":
                      !isDarkMode,
                  },
                )}
              >
                <h3
                  className={cn("mb-6 text-2xl font-bold", {
                    "text-blue-300": isDarkMode,
                    "text-blue-600": !isDarkMode,
                  })}
                >
                  Профили олимпиады
                </h3>

                <div className="space-y-4">
                  {olympiads.map((olympiad, index) => (
                    <m.div
                      key={index}
                      initial={{ opacity: 0, y: 20 }}
                      animate={{ opacity: 1, y: 0 }}
                      transition={{ delay: index * 0.1 }}
                      className={cn(
                        "group cursor-pointer rounded-xl p-5 backdrop-blur-sm transition-all duration-300",
                        {
                          "bg-[#1e293b]/80 hover:border-blue-400/40 hover:bg-[#2d3748]/90":
                            isDarkMode,
                          "border border-gray-200 bg-white/90 shadow-sm hover:border-blue-300 hover:bg-blue-50/95 hover:shadow-md":
                            !isDarkMode,
                        },
                      )}
                      whileHover={{ scale: 1.02 }}
                      whileTap={{ scale: 0.98 }}
                      onClick={() =>
                        navigate("/olympiad", {
                          state: { olympiad },
                        })
                      }
                    >
                      <div className="flex items-start gap-4">
                        {/* Иконка олимпиады */}
                        <div
                          className={cn(
                            "mt-1 flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg",
                            {
                              "bg-blue-500/20 text-blue-400": isDarkMode,
                              "bg-blue-100 text-blue-600": !isDarkMode,
                            },
                          )}
                        >
                          <svg
                            className="h-5 w-5"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                          >
                            <path
                              strokeLinecap="round"
                              strokeLinejoin="round"
                              strokeWidth={2}
                              d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                            />
                          </svg>
                        </div>

                        <div className="flex-1">
                          <h4
                            className={cn(
                              "mb-2 text-lg font-bold transition-colors duration-300 group-hover:text-blue-400",
                              {
                                "text-white": isDarkMode,
                                "text-gray-900": !isDarkMode,
                              },
                            )}
                          >
                            {olympiad.name}
                          </h4>

                          <p
                            className={cn("text-sm leading-relaxed", {
                              "text-gray-300": isDarkMode,
                              "text-gray-600": !isDarkMode,
                            })}
                          >
                            {olympiad.description}
                          </p>

                          {/* Индикатор кликабельности */}
                          <div className="mt-3 flex items-center gap-2">
                            <span
                              className={cn(
                                "text-sm font-medium transition-colors duration-300",
                                {
                                  "text-blue-400 group-hover:text-blue-300":
                                    isDarkMode,
                                  "text-blue-600 group-hover:text-blue-500":
                                    !isDarkMode,
                                },
                              )}
                            >
                              Нажмите для просмотра
                            </span>
                            <svg
                              className={cn(
                                "h-3 w-3 transition-transform duration-300 group-hover:translate-x-1",
                                {
                                  "text-blue-400": isDarkMode,
                                  "text-blue-600": !isDarkMode,
                                },
                              )}
                              fill="none"
                              stroke="currentColor"
                              viewBox="0 0 24 24"
                            >
                              <path
                                strokeLinecap="round"
                                strokeLinejoin="round"
                                strokeWidth={2}
                                d="M9 5l7 7-7 7"
                              />
                            </svg>
                          </div>
                        </div>
                      </div>
                    </m.div>
                  ))}
                </div>

                {/* Кнопка для перехода к регистрации */}
                <div className="mt-6 border-t border-gray-700/30 pt-6">
                  <Link to="/passing">
                    <m.button
                      className={cn(
                        "group relative w-full rounded-xl px-6 py-3 font-semibold transition-all duration-300",
                        {
                          "bg-blue-600 text-white hover:bg-blue-500 hover:shadow-lg":
                            isDarkMode,
                          "bg-blue-500 text-white hover:bg-blue-400 hover:shadow-lg":
                            !isDarkMode,
                        },
                      )}
                      whileHover={{ scale: 1.02 }}
                      whileTap={{ scale: 0.98 }}
                    >
                      <span className="relative z-10 flex items-center justify-center gap-2">
                        <svg
                          className="h-5 w-5"
                          fill="none"
                          stroke="currentColor"
                          viewBox="0 0 24 24"
                        >
                          <path
                            strokeLinecap="round"
                            strokeLinejoin="round"
                            strokeWidth={2}
                            d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"
                          />
                        </svg>
                        Зарегистрироваться на олимпиаду
                      </span>
                    </m.button>
                  </Link>
                </div>
              </m.div>
            </m.div>
          </div>

          {/* Центральная колонка - кнопки */}
          <div className="justify-center">
            <About />
          </div>

          {/* Правая колонка - новости */}
          <News />
        </div>
      </section>

      {/* Карусель */}
      <Carousel />

      <Footer />
    </div>
  );
}


import { useEffect, useState, useRef } from "react";
import axios from "axios";
import cn from "clsx";
import { useThemeStore } from "../../../stores/themeStore";

function InfiniteCarousel() {
  const API_URL = import.meta.env.VITE_API_URL;
  const STATIC_URL = import.meta.env.VITE_STATIC_URL;
  const { isDarkMode } = useThemeStore();
  const [images, setImages] = useState<string[]>([]);
  const [isLoading, setIsLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);
  const carouselRef = useRef<HTMLDivElement>(null);
  const scrollSpeed = 30;

  useEffect(() => {
    const fetchImages = async () => {
      try {
        setIsLoading(true);
        setError(null);

        const response = await axios.get(`${API_URL}/carousel/images`);

        if (response.data && Array.isArray(response.data)) {
          // Берем оригинальный массив и дублируем его
          const originalImages = response.data;
          // Дублируем массив для бесшовной прокрутки
          setImages([...originalImages, ...originalImages]);
        } else {
          throw new Error("Некорректный формат данных");
        }
      } catch (err) {
        console.error("Ошибка загрузки изображений:", err);
        setError("Не удалось загрузить изображения");
      } finally {
        setIsLoading(false);
      }
    };

    fetchImages();
  }, [API_URL]);

  useEffect(() => {
    if (images.length > 0) {
      const carousel = carouselRef.current;
      if (!carousel) return;

      let requestId: number;
      let lastTimestamp = 0;

      const animateScroll = (timestamp: number) => {
        if (!lastTimestamp) lastTimestamp = timestamp;
        const delta = timestamp - lastTimestamp;
        lastTimestamp = timestamp;

        if (carousel.scrollLeft >= carousel.scrollWidth / 2) {
          carousel.scrollLeft = 0;
        } else {
          carousel.scrollLeft += delta / scrollSpeed;
        }

        requestId = requestAnimationFrame(animateScroll);
      };

      requestId = requestAnimationFrame(animateScroll);

      return () => {
        cancelAnimationFrame(requestId);
      };
    }
  }, [images]);

  // Функция для получения правильного индекса (с конца)
  const getReversedIndex = (index: number, totalImages: number) => {
    const originalCount = totalImages / 2;
    const positionInArray = index % originalCount;
    // Вычисляем индекс с конца: последний элемент становится первым
    return originalCount - 1 - positionInArray;
  };

  return (
    <section
      className={cn("p-8 text-center", {
        "bg-[#0d1117]": isDarkMode,
        "bg-white": !isDarkMode,
      })}
    >
      <h2
        className={cn("mb-6 text-2xl font-bold md:text-3xl", {
          "text-white": isDarkMode,
          "text-gray-900": !isDarkMode,
        })}
      >
        Галерея
      </h2>

      <div
        ref={carouselRef}
        className="scrollbar-hide relative overflow-x-hidden py-4"
      >
        <div className="flex space-x-4">
          {isLoading ? (
            <div className="flex h-60 w-full items-center justify-center">
              <p
                className={cn("text-lg", {
                  "text-gray-400": isDarkMode,
                  "text-gray-500": !isDarkMode,
                })}
              >
                Загрузка изображений...
              </p>
            </div>
          ) : error ? (
            <div className="flex h-60 w-full items-center justify-center">
              <p
                className={cn("text-lg text-red-500", {
                  "text-red-400": isDarkMode,
                })}
              >
                {error}
              </p>
            </div>
          ) : images.length > 0 ? (
            images.map((_imageUrl, index) => {
              const reversedIndex = getReversedIndex(index, images.length);
              const originalImageUrl = images[reversedIndex];

              return (
                <div
                  key={index}
                  className={cn("relative shrink-0 rounded-lg shadow-lg", {
                    "bg-gray-800": isDarkMode,
                    "bg-gray-100": !isDarkMode,
                  })}
                >
                  <img
                    src={`${STATIC_URL}${originalImageUrl}`}
                    alt={`Галерея ${reversedIndex + 1}`}
                    crossOrigin="anonymous"
                    className="h-60 w-auto rounded-lg object-cover"
                    loading="lazy"
                    onError={(e) => {
                      const target = e.target as HTMLImageElement;
                      target.style.display = "none";
                    }}
                  />
                </div>
              );
            })
          ) : (
            <div className="flex h-60 w-full items-center justify-center">
              <p
                className={cn("text-lg", {
                  "text-gray-400": isDarkMode,
                  "text-gray-500": !isDarkMode,
                })}
              >
                Нет доступных изображений
              </p>
            </div>
          )}
        </div>
      </div>
    </section>
  );
}

export default InfiniteCarousel;


import { m } from "framer-motion";
import { fadeUp } from "../../../components/animations/fadeUp";
import { useThemeStore } from "../../../stores/themeStore";
import cn from "clsx";
import { Link } from "react-router-dom";
import { IInfoItem } from "../../../types/IInfo.type";

function Info() {
  const { isDarkMode } = useThemeStore();

  const InfoItems: IInfoItem[] = [
    {
      title: "Об олимпиаде",
      desc: "Описание олимпиады, её цели и документы",
      link: "/about",
    },
    {
      title: "Прохождение олимпиады",
      desc: "Этапы участия и правила прохождения",
      link: "/passing",
    },
    {
      title: "Результаты Отборочного этапа",
      desc: "Результаты отборочного этапа олимпиады",
      link: "/",
    },
    {
      title: "Итоги Олимпиады",
      desc: "Победители и призёры олимпиады и их проекты",
      link: "/",
    },
    {
      title: "Результаты Олимпиады прошлых лет",
      desc: "Архив победителей и проектов прошлых лет",
      link: "/archive",
    },
    {
      title: "Наши партнёры",
      desc: "Организации и компании, поддерживающие олимпиаду",
      link: "/partners",
    },
  ];

  return (
    <div
      className={`col-auto grid grid-cols-1 gap-8 md:grid-cols-${InfoItems.length} lg:grid-cols-1 xl:gap-6`}
    >
      {InfoItems.map((item, index) => (
        <Link to={item.link} key={index}>
          <m.button
            key={index}
            variants={fadeUp}
            custom={index}
            initial="hidden"
            animate="visible"
            whileHover={{ scale: 1.05 }}
            whileTap={{ scale: 1 }}
            className={cn(
              "flex h-full w-full cursor-pointer flex-col items-center justify-center rounded-xl px-4 py-6 shadow-xl transition",

              {
                "bg-[#161b22]/50 hover:shadow-blue-500/20": isDarkMode,
                "border border-gray-200 bg-white hover:shadow-blue-200":
                  !isDarkMode,
              },
            )}
          >
            <h4
              className={cn("mb-2 text-xl font-bold", {
                "text-blue-300": isDarkMode,
                "text-blue-600": !isDarkMode,
              })}
            >
              {item.title}
            </h4>
            <p
              className={cn("text-md", {
                "text-gray-400": isDarkMode,
                "text-gray-600": !isDarkMode,
              })}
            >
              {item.desc}
            </p>
          </m.button>
        </Link>
      ))}
    </div>
  );
}

export default Info;


import { m } from "framer-motion";
import { fadeUp } from "../../../../components/animations/fadeUp";
import { useThemeStore } from "../../../../stores/themeStore";
import cn from "clsx";
import NewsModal from "./NewsModal";
import { useState, useEffect } from "react";
import axios from "axios";
import { toast } from "react-toastify";
import { getCustomToastStyle } from "../../../../components/ui/toastStyles";
import { INewsItem } from "../../../../types/INews.type";



function News() {
  const API_URL = import.meta.env.VITE_API_URL;
  const [selectedNewsIndex, setSelectedNewsIndex] = useState<number | null>(
    null,
  );
  const [newsItems, setNewsItems] = useState<
    { text: string; date: string; desc: string }[]
  >([]);
  const [isLoading, setIsLoading] = useState(true);
  const { isDarkMode } = useThemeStore();

  useEffect(() => {
    const fetchNews = async () => {
      try {
        const response = await axios.get(`${API_URL}/news`);

        // Преобразуем данные API в нужный формат
        const formattedNews = response.data.map((item: INewsItem) => ({
          text: item.title,
          date: formatDate(item.newsDate),
          desc: item.description,
        }));
        setNewsItems(formattedNews);
      } catch (error) {
        toast.error(
          "Ошибка загрузки новостей",
          getCustomToastStyle(isDarkMode),
        );
        console.error("Failed to fetch news:", error);
      } finally {
        setIsLoading(false);
      }
    };

    fetchNews();
  }, [isDarkMode]);

  const formatDate = (dateString: string) => {
    const date = new Date(dateString);
    return date.toLocaleDateString("ru-RU", {
      day: "numeric",
      month: "long",
      year: "numeric",
    });
  };

  return (
    <div className="h-full max-h-[32rem] overflow-y-auto">
      <m.h3
        initial={{ opacity: 0, y: 20 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ duration: 0.6 }}
        className={cn("mb-8 text-3xl font-semibold", {
          "text-white": isDarkMode,
          "text-gray-900": !isDarkMode,
        })}
      >
        Новости
      </m.h3>

      {isLoading ? (
        <div className="flex h-40 items-center justify-center">
          <div
            className={cn("text-lg", {
              "text-gray-400": isDarkMode,
              "text-gray-600": !isDarkMode,
            })}
          >
            Загрузка новостей...
          </div>
        </div>
      ) : newsItems.length === 0 ? (
        <div
          className={cn("py-10 text-center", {
            "text-gray-400": isDarkMode,
            "text-gray-500": !isDarkMode,
          })}
        >
          Нет доступных новостей
        </div>
      ) : (
        <m.ul
          className={cn(
            "space-y-6",
            {
              "text-gray-300": isDarkMode,
              "text-gray-600": !isDarkMode,
            },
            newsItems.length > 3 ? "h-2/3 overflow-y-auto pr-2" : "",
          )}
        >
          {newsItems.map((item, index) => (
            <m.li
              key={index}
              variants={fadeUp}
              initial="hidden"
              animate="visible"
              onClick={() => setSelectedNewsIndex(index)}
              className={cn(
                "cursor-pointer rounded-xl p-4 shadow-md transition",
                {
                  "bg-[#111827] hover:shadow-blue-500/20": isDarkMode,
                  "bg-white hover:shadow-blue-200": !isDarkMode,
                  "border border-gray-200": !isDarkMode,
                },
              )}
            >
              <p
                className={cn("font-medium", {
                  "text-white": isDarkMode,
                  "text-gray-800": !isDarkMode,
                })}
              >
                {item.text}
              </p>
              <p
                className={cn("text-sm", {
                  "text-gray-400": isDarkMode,
                  "text-gray-500": !isDarkMode,
                })}
              >
                {item.date}
              </p>
            </m.li>
          ))}
        </m.ul>
      )}

      {selectedNewsIndex !== null && (
        <NewsModal
          text={newsItems[selectedNewsIndex].text}
          desc={newsItems[selectedNewsIndex].desc}
          date={newsItems[selectedNewsIndex].date}
          isOpen={selectedNewsIndex !== null}
          onClose={() => setSelectedNewsIndex(null)}
        />
      )}
    </div>
  );
}

export default News;


import { m } from "framer-motion";
import cn from "clsx";
import { useThemeStore } from "../../../../stores/themeStore";
import { useRef } from "react";
import { INewsModalProps } from "../../../../types/INews.type";

function NewsModal({ isOpen, onClose, text, desc, date }: INewsModalProps) {
  const { isDarkMode } = useThemeStore();
  const modalRef = useRef<HTMLDivElement>(null);

  if (!isOpen) return null;

  return (
    <>
      {/* Затемнение фона */}
      <m.div
        initial={{ opacity: 0 }}
        animate={{ opacity: 1 }}
        exit={{ opacity: 0 }}
        className="fixed inset-0 z-40 h-full w-full bg-black/10 backdrop-blur-xs"
      />

      {/* Контейнер модального окна */}
      <div className="fixed inset-0 z-50 flex items-center justify-center p-4">
        <m.div
          ref={modalRef}
          initial={{ opacity: 0, scale: 0.9 }}
          animate={{ opacity: 1, scale: 1 }}
          exit={{ opacity: 0, scale: 0.95 }}
          className={cn(
            "h-xl relative w-full max-w-xl rounded-2xl border border-blue-800 bg-gradient-to-br p-8 shadow-md transition-all",
            {
              "from-[#142441] to-[#15213e] text-white": isDarkMode,
              "from-white to-blue-200 text-gray-800": !isDarkMode,
            },
          )}
        >
          {/* Кнопка закрытия */}
          <button
            onClick={onClose}
            className={cn(
              "absolute top-4 right-4 flex h-8 w-8 cursor-pointer items-center justify-center rounded-full transition-colors",
              {
                "hover:bg-blue-700/30": isDarkMode,
                "hover:bg-blue-200": !isDarkMode,
              },
            )}
            aria-label="Закрыть окно"
          >
            <svg
              width="16"
              height="16"
              viewBox="0 0 16 16"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              className={cn({
                "text-blue-300": isDarkMode,
                "text-blue-600": !isDarkMode,
              })}
            >
              <path
                d="M12 4L4 12M4 4L12 12"
                stroke="currentColor"
                strokeWidth="1.5"
                strokeLinecap="round"
              />
            </svg>
          </button>
          <h3
            className={cn("mb-6 text-center text-3xl font-semibold", {
              "text-white": isDarkMode,
              "text-gray-900": !isDarkMode,
            })}
          >
            {text}
          </h3>
          <p
            className={cn("mb-2 text-start text-lg", {
              "text-blue-400": isDarkMode,
              "text-blue-500": !isDarkMode,
            })}
          >
            {date}
          </p>
          <p className="text-lg">{desc}</p>
        </m.div>
      </div>
    </>
  );
}

export default NewsModal;


import { m } from "framer-motion";
import { Button } from "../../../components/ui/Button";
import { useThemeStore } from "../../../stores/themeStore";
import { Link } from "react-router-dom";
import cn from "clsx";

function Results() {
  const { isDarkMode } = useThemeStore();

  return (
    <div className="flex flex-col items-center gap-10">
      <m.p
        initial={{ opacity: 0 }}
        animate={{ opacity: 1 }}
        transition={{ delay: 0.2 }}
        className={cn("max-w-4xl text-lg", {
          "text-gray-400": isDarkMode,
          "text-gray-600": !isDarkMode,
        })}
      >
        Здесь публикуются финальные баллы участников, список победителей и
        аналитика прохождения этапов. Все данные доступны для скачивания в
        формате PDF и доступны на портале личного кабинета.
      </m.p>
      <Link to={"/ranking"}>
        <Button className="px-7 py-4">Перейти к результатам</Button>
      </Link>
    </div>
  );
}

export default Results;


import Input from "../../components/ui/Input";
import { Button } from "../../components/ui/Button";
import { useThemeStore } from "../../stores/themeStore";
import { m } from "framer-motion";
import { SubmitHandler, useForm } from "react-hook-form";
import cn from "clsx";
import { useRef, useState } from "react";
import axios from "axios";

interface IForgotPasswordModalProps {
  isOpen: boolean;
  onClose: () => void;
}

interface IPasswordResetForm {
  email: string;
}

export const ForgotPasswordModal = ({
  isOpen,
  onClose,
}: IForgotPasswordModalProps) => {
  const API_URL = import.meta.env.VITE_API_URL;
  const { register, handleSubmit, reset } = useForm<IPasswordResetForm>();
  const { isDarkMode } = useThemeStore();
  const modalRef = useRef<HTMLDivElement>(null);
  const [isLoading, setIsLoading] = useState(false);
  const [serverMessage, setServerMessage] = useState<string>("");
  const [isSuccess, setIsSuccess] = useState(false);

  const onSubmit: SubmitHandler<IPasswordResetForm> = async (data) => {
    setIsLoading(true);
    setServerMessage("");
    setIsSuccess(false);

    try {
      await axios.post(`${API_URL}/auth/forgot-password`, {
        email: data.email,
      });

      setIsSuccess(true);
      setServerMessage(
        "Ссылка для восстановления пароля отправлена на вашу почту",
      );

      setTimeout(() => {
        onClose();
        reset();
        setServerMessage("");
        setIsSuccess(false);
      }, 2000);
    } catch (error) {
      console.error("Ошибка восстановления пароля:", error);

      if (axios.isAxiosError(error)) {
        if (error.response) {
          const errorMessage =
            error.response.data?.message ||
            error.response.data?.error ||
            "Не удалось отправить запрос. Проверьте email и попробуйте снова.";
          setServerMessage(errorMessage);
        } else if (error.request) {
          setServerMessage(
            "Ошибка подключения к серверу. Проверьте интернет-соединение.",
          );
        }
      } else {
        setServerMessage("Произошла неизвестная ошибка. Попробуйте позже.");
      }
    } finally {
      setIsLoading(false);
    }
  };

  if (!isOpen) return null;

  return (
    <>
      {/* Затемнение фона */}
      <m.div
        initial={{ opacity: 0 }}
        animate={{ opacity: 1 }}
        exit={{ opacity: 0 }}
        className="fixed inset-0 z-40 bg-black/35 backdrop-blur-xs"
      />

      {/* Контейнер модального окна */}
      <div className="fixed inset-0 z-50 flex items-center justify-center p-4">
        <m.div
          ref={modalRef}
          initial={{ opacity: 0, scale: 0.9 }}
          animate={{ opacity: 1, scale: 1 }}
          exit={{ opacity: 0, scale: 0.9 }}
          transition={{ type: "spring", damping: 20 }}
          className={cn(
            "relative w-full max-w-md rounded-2xl border border-blue-600 bg-gradient-to-br p-8 shadow-md transition-all",
            {
              "from-[#142441] to-[#15213e] text-white": isDarkMode,
              "from-white via-blue-100 to-blue-300 text-gray-800": !isDarkMode,
            },
          )}
        >
          {/* Кнопка закрытия */}
          <button
            onClick={onClose}
            className={cn(
              "absolute top-4 right-4 flex h-8 w-8 cursor-pointer items-center justify-center rounded-full transition-colors",
              {
                "hover:bg-blue-700/30": isDarkMode,
                "hover:bg-blue-200": !isDarkMode,
              },
            )}
            aria-label="Закрыть окно"
          >
            <svg
              width="16"
              height="16"
              viewBox="0 0 16 16"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              className={cn({
                "text-blue-300": isDarkMode,
                "text-blue-600": !isDarkMode,
              })}
            >
              <path
                d="M12 4L4 12M4 4L12 12"
                stroke="currentColor"
                strokeWidth="1.5"
                strokeLinecap="round"
              />
            </svg>
          </button>

          <h3
            className={cn("mb-6 text-center text-3xl font-semibold", {
              "text-white": isDarkMode,
              "text-gray-900": !isDarkMode,
            })}
          >
            Восстановление пароля
          </h3>
          <form
            onSubmit={handleSubmit(onSubmit)}
            className="flex flex-col gap-6"
          >
            <Input
              type="email"
              placeholder="Ваш email"
              {...register("email", { required: true })}
            />

            {serverMessage && (
              <div
                className={cn(
                  "rounded-lg p-3 text-center text-sm font-medium",
                  isSuccess
                    ? "bg-green-100 text-green-700"
                    : "bg-red-100 text-red-700",
                )}
              >
                {serverMessage}
              </div>
            )}

            <div className="flex justify-end gap-3">
              <Button
                type="submit"
                className="h-14 w-full text-lg"
                disabled={isLoading}
              >
                {isLoading ? "Отправка..." : "Отправить"}
              </Button>
            </div>
          </form>
        </m.div>
      </div>
    </>
  );
};


import { BackgroundBlobs } from "../../components/ui/BackgroundBlobs/BackgroundBlobs";
import { Button } from "../../components/ui/Button";
import Navbar from "../../components/layout/Navbar/Navbar";
import Footer from "../../components/layout/Footer/Footer";
import Input from "../../components/ui/Input";
import { SubmitHandler, useForm } from "react-hook-form";
import { m } from "framer-motion";
import cn from "clsx";
import { useThemeStore } from "../../stores/themeStore";
import { useState } from "react";
import { ForgotPasswordModal } from "./ForgotPasswordModal";
import { toast, ToastContainer } from "react-toastify";
import { getCustomToastStyle } from "../../components/ui/toastStyles";
import axios from "axios";
import { useAuthStore } from "../../stores/authStore";
import { useNavigate } from "react-router-dom";

interface ILoginForm {
  email: string;
  password: string;
}

function Login() {
  const API_URL = import.meta.env.VITE_API_URL;
  const { isDarkMode } = useThemeStore();
  const { setToken, setUserData } = useAuthStore();
  const navigate = useNavigate();
  const [isLoading, setIsLoading] = useState(false);

  const { register, handleSubmit } = useForm<ILoginForm>({
    mode: "onChange",
  });

  const [showForgotPasswordModal, setShowForgotPasswordModal] =
    useState<boolean>(false);

  const onSubmit: SubmitHandler<ILoginForm> = async (data) => {
    setIsLoading(true);
    try {
      const response = await axios.post(`${API_URL}/auth/login`, {
        email: data.email,
        password: data.password,
      });

      setToken(response.data.token);
      setUserData(response.data);

      toast.success("Вход выполнен успешно!", getCustomToastStyle(isDarkMode));

      if (response.data.role === "ADMIN") {
        navigate("/admin");
      } else {
        navigate("/profile");
      }
    } catch (error) {
      if (axios.isAxiosError(error)) {
        const errorMessage = error.response?.data?.message || "Ошибка входа";
        toast.error(errorMessage, getCustomToastStyle(isDarkMode));
      } else {
        toast.error("Неизвестная ошибка", getCustomToastStyle(isDarkMode));
      }
      console.error(error);
    } finally {
      setIsLoading(false);
    }
  };

  const onError = () => {
    toast.warn(
      "Пожалуйста, заполните все поля",
      getCustomToastStyle(isDarkMode),
    );
  };

  return (
    <div
      className={cn("min-h-screen w-screen font-sans", {
        "bg-[#0b0f1a] text-white": isDarkMode,
        "bg-gray-50 text-gray-900": !isDarkMode,
      })}
    >
      <BackgroundBlobs />
      <Navbar />

      <ForgotPasswordModal
        isOpen={showForgotPasswordModal}
        onClose={() => setShowForgotPasswordModal(false)}
      />

      <m.section
        className={cn(
          "relative flex flex-col items-center justify-center gap-8 px-4 py-12 sm:px-6 md:flex-row md:gap-16 md:py-20",
          {
            "bg-gradient-to-br from-[#0f172a] via-[#101b36] to-[#14213d]":
              isDarkMode,
            "bg-gradient-to-br from-blue-50 via-blue-100 to-blue-200":
              !isDarkMode,
          },
        )}
      >
        <form
          className="w-full max-w-md px-4 sm:px-0 md:ml-20"
          onSubmit={handleSubmit(onSubmit, onError)}
        >
          <div className="grid grid-cols-1 gap-6">
            <Input
              type="text"
              placeholder="Электронная почта"
              {...register("email", {
                required: true,
                pattern: {
                  value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,
                  message: "Некорректный email",
                },
              })}
            />
            <Input
              type="password"
              placeholder="Пароль"
              {...register("password", {
                required: true,
                minLength: {
                  value: 5,
                  message: "Минимум 5 символов",
                },
              })}
            />
            <Button
              type="submit"
              className="py-2.5 text-lg"
              disabled={isLoading}
            >
              {isLoading ? "Вход..." : "Войти"}
            </Button>
            <a
              onClick={() => setShowForgotPasswordModal(true)}
              className="inline-block cursor-pointer text-center text-lg text-blue-400 transition hover:text-blue-300"
            >
              Забыли пароль?
            </a>
          </div>
        </form>
        <m.div
          initial={{ opacity: 0, scale: 0.9 }}
          animate={{ opacity: 1, scale: 1 }}
          transition={{ duration: 0.6 }}
          className={cn(
            "mt-8 flex h-64 w-full max-w-md items-center justify-center rounded-2xl md:mt-0 md:h-80 md:w-xl",
            {
              "bg-gradient-to-br from-blue-700 to-blue-400": isDarkMode,
              "bg-gradient-to-br from-blue-400 to-blue-300": !isDarkMode,
            },
          )}
        >
          <img
            src={isDarkMode ? "/logo_dark.png" : "/logo.png"}
            className="z-10 h-64 object-contain md:h-80"
            alt="Логотип"
          />
        </m.div>
      </m.section>
      <Footer />

      <ToastContainer
        position="top-right"
        autoClose={3000}
        hideProgressBar={false}
        newestOnTop={false}
        closeOnClick
        pauseOnHover
        draggable
      />
    </div>
  );
}

export default Login;


import { Link } from "react-router-dom";
import { BackgroundBlobs } from "../components/ui/BackgroundBlobs/BackgroundBlobs";
import { useThemeStore } from "../stores/themeStore";
import cn from "clsx";
import { Button } from "../components/ui/Button";
import { m } from "framer-motion";
import { fadeUp } from "../components/animations/fadeUp";

export default function NotFoundPage() {
  const { isDarkMode } = useThemeStore();

  return (
    <div
      className={cn("min-h-screen w-screen font-sans", {
        "bg-[#0b0f1a] text-white": isDarkMode,
        "bg-gray-50 text-gray-900": !isDarkMode,
      })}
    >
      <BackgroundBlobs />

      <div className="flex min-h-screen items-center justify-center px-6">
        <div className="max-w-md text-center">
          {/* Число 404 */}
          <m.h1
            variants={fadeUp}
            initial="hidden"
            animate="visible"
            className={cn("mb-4 text-8xl font-bold", {
              "text-blue-300": isDarkMode,
              "text-blue-600": !isDarkMode,
            })}
          >
            404
          </m.h1>

          {/* Заголовок */}
          <m.h2
            variants={fadeUp}
            initial="hidden"
            animate="visible"
            transition={{ delay: 0.1 }}
            className={cn("mb-4 text-2xl font-bold", {
              "text-blue-200": isDarkMode,
              "text-blue-700": !isDarkMode,
            })}
          >
            Страница не найдена
          </m.h2>

          {/* Описание */}
          <m.p
            variants={fadeUp}
            initial="hidden"
            animate="visible"
            transition={{ delay: 0.2 }}
            className={cn("mb-8", {
              "text-gray-300": isDarkMode,
              "text-gray-600": !isDarkMode,
            })}
          >
            Запрашиваемая страница не существует или была перемещена.
          </m.p>

          <m.div
            variants={fadeUp}
            initial="hidden"
            animate="visible"
            transition={{ delay: 0.3 }}
          >
            <Link to="/">
              <Button className="text-5xl">На главную</Button>
            </Link>
          </m.div>
        </div>
      </div>
    </div>
  );
}


import cn from "clsx";
import { m } from "framer-motion";
import { Link, useLocation } from "react-router-dom";
import { useThemeStore } from "../stores/themeStore";
import { BackgroundBlobs } from "../components/ui/BackgroundBlobs/BackgroundBlobs";
import Navbar from "../components/layout/Navbar/Navbar";
import { fadeUp } from "../components/animations/fadeUp";
import { Button } from "../components/ui/Button";
import Footer from "../components/layout/Footer/Footer";

interface OlympiadProfileData {
  name: string;
  description: string;
  fullDescription: string;
  organizer: string;
  dates: {
    qualifying: string;
    final: string;
    finalEnd: string;
  };
  address: string;
}

function OlympiadProfile() {
  const { isDarkMode } = useThemeStore();
  const location = useLocation();
  const profile = location.state?.olympiad as OlympiadProfileData | undefined;

  // Если данные не переданы (прямой заход), редирект на главную
  if (!profile) {
    return (
      <div
        className={cn(
          "flex min-h-screen w-screen items-center justify-center font-sans",
          {
            "bg-[#0b0f1a] text-white": isDarkMode,
            "bg-gray-50 text-gray-900": !isDarkMode,
          },
        )}
      >
        <div className="text-center">
          <h1 className="mb-4 text-2xl">Профиль не найден</h1>
          <Link to="/">
            <Button>Вернуться на главную</Button>
          </Link>
        </div>
      </div>
    );
  }

  return (
    <div
      className={cn("min-h-screen w-screen font-sans", {
        "bg-[#0b0f1a] text-white": isDarkMode,
        "bg-gray-50 text-gray-900": !isDarkMode,
      })}
    >
      <BackgroundBlobs />
      <Navbar />

      <section className="flex items-center justify-center px-6 py-12">
        <div className="w-10xl mx-auto max-w-6xl">
          <m.div
            variants={fadeUp}
            initial="hidden"
            animate="visible"
            className="space-y-8"
          >
            {/* Заголовок профиля */}
            <div className="text-center">
              <div className="mb-4 flex items-center justify-center gap-4">
                <h1
                  className={cn("text-4xl font-bold md:text-5xl", {
                    "text-white": isDarkMode,
                    "text-gray-900": !isDarkMode,
                  })}
                >
                  {profile.name}
                </h1>
              </div>
              <p
                className={cn("mx-auto max-w-3xl text-xl", {
                  "text-blue-300": isDarkMode,
                  "text-blue-600": !isDarkMode,
                })}
              >
                {profile.description}
              </p>
            </div>

            {/* Основной контент */}
            <div className="grid grid-cols-1 gap-8 lg:grid-cols-3">
              {/* Левая колонка - детальная информация */}
              <div className="space-y-6 lg:col-span-2">
                {/* Подробное описание */}
                <div
                  className={cn("rounded-2xl p-8", {
                    "border border-blue-800/30 bg-[#0b0f1a]": isDarkMode,
                    "border border-gray-200 bg-white shadow-md": !isDarkMode,
                  })}
                >
                  <div className="mb-6 flex items-center gap-4">
                    <div
                      className={cn(
                        "flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-xl",
                        {
                          "bg-blue-500/20 text-blue-400": isDarkMode,
                          "bg-blue-100 text-blue-600": !isDarkMode,
                        },
                      )}
                    >
                      <svg
                        className="h-6 w-6"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          strokeLinecap="round"
                          strokeLinejoin="round"
                          strokeWidth={2}
                          d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                        />
                      </svg>
                    </div>
                    <h2
                      className={cn("text-2xl font-bold", {
                        "text-blue-300": isDarkMode,
                        "text-blue-600": !isDarkMode,
                      })}
                    >
                      О профиле
                    </h2>
                  </div>
                  <p className="text-lg leading-relaxed whitespace-pre-line">
                    {profile.fullDescription}
                  </p>
                </div>
              </div>

              {/* Правая колонка - ключевая информация */}
              <div className="space-y-6">
                {/* Даты проведения */}
                <div
                  className={cn("rounded-2xl p-6", {
                    "border border-blue-800/30 bg-[#0b0f1a]": isDarkMode,
                    "border border-gray-200 bg-white shadow-md": !isDarkMode,
                  })}
                >
                  <div className="mb-4 flex items-center gap-4">
                    <div
                      className={cn(
                        "flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg",
                        {
                          "bg-blue-500/20 text-blue-400": isDarkMode,
                          "bg-blue-100 text-blue-600": !isDarkMode,
                        },
                      )}
                    >
                      <svg
                        className="h-5 w-5"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          strokeLinecap="round"
                          strokeLinejoin="round"
                          strokeWidth={2}
                          d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                        />
                      </svg>
                    </div>
                    <h3
                      className={cn("text-xl font-bold", {
                        "text-blue-300": isDarkMode,
                        "text-blue-600": !isDarkMode,
                      })}
                    >
                      Даты проведения
                    </h3>
                  </div>
                  <div className="space-y-3">
                    <div>
                      <p
                        className={cn("text-sm font-medium", {
                          "text-gray-400": isDarkMode,
                          "text-gray-500": !isDarkMode,
                        })}
                      >
                        Отборочный этап:
                      </p>
                      <p className="font-semibold">
                        {profile.dates.qualifying}
                      </p>
                    </div>
                    <div>
                      <p
                        className={cn("text-sm font-medium", {
                          "text-gray-400": isDarkMode,
                          "text-gray-500": !isDarkMode,
                        })}
                      >
                        Заключительный этап:
                      </p>
                      <p className="font-semibold">{profile.dates.final}</p>
                    </div>
                    <div>
                      <p
                        className={cn("text-sm font-medium", {
                          "text-gray-400": isDarkMode,
                          "text-gray-500": !isDarkMode,
                        })}
                      >
                        Финальный этап:
                      </p>
                      <p className="font-semibold">{profile.dates.finalEnd}</p>
                    </div>
                  </div>
                </div>

                {/* Организатор */}
                <div
                  className={cn("rounded-2xl p-6", {
                    "border border-blue-800/30 bg-[#0b0f1a]": isDarkMode,
                    "border border-gray-200 bg-white shadow-md": !isDarkMode,
                  })}
                >
                  <div className="mb-4 flex items-center gap-4">
                    <div
                      className={cn(
                        "flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg",
                        {
                          "bg-blue-500/20 text-blue-400": isDarkMode,
                          "bg-blue-100 text-blue-600": !isDarkMode,
                        },
                      )}
                    >
                      <svg
                        className="h-5 w-5"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          strokeLinecap="round"
                          strokeLinejoin="round"
                          strokeWidth={2}
                          d="M12 14l9-5-9-5-9 5 9 5z"
                        />
                        <path
                          strokeLinecap="round"
                          strokeLinejoin="round"
                          strokeWidth={2}
                          d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"
                        />
                        <path
                          strokeLinecap="round"
                          strokeLinejoin="round"
                          strokeWidth={2}
                          d="M12 14v6m0 0l-3-3m3 3l3-3"
                        />
                      </svg>
                    </div>
                    <h3
                      className={cn("text-xl font-bold", {
                        "text-blue-300": isDarkMode,
                        "text-blue-600": !isDarkMode,
                      })}
                    >
                      Организаторы профиля
                    </h3>
                  </div>
                  <p>{profile.organizer}</p>
                </div>

                {/* Место проведения */}
                <div
                  className={cn("rounded-2xl p-6", {
                    "border border-blue-800/30 bg-[#0b0f1a]": isDarkMode,
                    "border border-gray-200 bg-white shadow-md": !isDarkMode,
                  })}
                >
                  <div className="mb-4 flex items-center gap-4">
                    <div
                      className={cn(
                        "flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg",
                        {
                          "bg-blue-500/20 text-blue-400": isDarkMode,
                          "bg-blue-100 text-blue-600": !isDarkMode,
                        },
                      )}
                    >
                      <svg
                        className="h-5 w-5"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          strokeLinecap="round"
                          strokeLinejoin="round"
                          strokeWidth={2}
                          d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"
                        />
                      </svg>
                    </div>
                    <h3
                      className={cn("text-xl font-bold", {
                        "text-blue-300": isDarkMode,
                        "text-blue-600": !isDarkMode,
                      })}
                    >
                      Место проведения
                    </h3>
                  </div>
                  <p>{profile.address}</p>
                </div>

                {/* Кнопки действий */}
                <div className="space-y-3">
                  <Link to="/" className="block">
                    <Button
                      className={cn("w-full py-3", {
                        "border-gray-600 text-white": isDarkMode,
                        "border-gray-300 text-gray-700": !isDarkMode,
                      })}
                    >
                      <div className="flex items-center justify-center gap-2">
                        <svg
                          className="h-5 w-5"
                          fill="none"
                          stroke="currentColor"
                          viewBox="0 0 24 24"
                        >
                          <path
                            strokeLinecap="round"
                            strokeLinejoin="round"
                            strokeWidth={2}
                            d="M10 19l-7-7m0 0l7-7m-7 7h18"
                          />
                        </svg>
                        На главную
                      </div>
                    </Button>
                  </Link>
                </div>
              </div>
            </div>
          </m.div>
        </div>
      </section>

      <Footer />
    </div>
  );
}

export default OlympiadProfile;


import { motion } from "framer-motion";
import { useThemeStore } from "../stores/themeStore";
import cn from "clsx";
import Navbar from "../components/layout/Navbar/Navbar";
import Footer from "../components/layout/Footer/Footer";
import { BackgroundBlobs } from "../components/ui/BackgroundBlobs/BackgroundBlobs";
import { Link } from "react-router-dom";
import { Button } from "../components/ui/Button";
import Background from "../components/ui/Background";

const partners = [
  {
    logo: "/expert_logo.png",
    name: "Экспертно-криминалистический центр МВД России",
    size: "h-40",
  },
  {
    logo: "/ubk_logo.png",
    name: "Управление по организации борьбы с противоправным использованием информационно-коммуникационных технологий МВД России",
    size: "h-40",
  },
  {
    logo: "/bstm_logo.png",
    name: "Бюро специальных технических мероприятий МВД России",
    size: "h-36",
  },
  {
    logo: "/stis_logo.png",
    name: "НПО «Специальная техника и связь» МВД России",
    size: "h-52",
  },
  {
    logo: "/giac_logo.png",
    name: "Главный информационно-аналитический центр МВД России",
    size: "h-38",
  },
  {
    logo: "/ditsizi_logo.png",
    name: "Департамент информационных технологий, связи и защиты информации МВД России",
    size: "h-38",
  },
  {
    logo: "/consplus_logo.png",
    name: "Консультант Плюс",
    size: "h-32",
  },
  {
    logo: "/garant_logo.png",
    name: "Гарант",
    size: "h-54",
  },
  {
    logo: "/sber_logo.svg",
    name: "Сбер",
    size: "h-20",
  },
  {
    logo: {
      dark: "/standart_logo.svg",
      light: "/standart_logo_dark.png", // Добавляем альтернативный логотип для светлой темы
    },
    name: "СтандартПроект",
    size: "h-72",
  },
  {
    logo: "/kaspersky_logo.svg",
    name: "Лаборатория Касперского",
    size: "h-72",
  },
];

const containerVariants = {
  hidden: { opacity: 0 },
  visible: {
    opacity: 1,
    transition: {
      staggerChildren: 0.1,
      delayChildren: 0.3,
    },
  },
};

const itemVariants = {
  hidden: { y: 20, opacity: 0 },
  visible: {
    y: 0,
    opacity: 1,
    transition: {
      duration: 0.5,
      ease: "easeOut",
    },
  },
};

export default function Partners() {
  const { isDarkMode } = useThemeStore();

  // Функция для получения правильного логотипа в зависимости от темы
  const getLogo = (logo: string | { dark: string; light: string }) => {
    if (typeof logo === "string") {
      return logo;
    }
    return isDarkMode ? logo.dark : logo.light;
  };

  return (
    <div
      className={cn("min-h-screen w-screen font-sans", {
        "bg-[#0b0f1a] text-white": isDarkMode,
        "bg-gray-50 text-gray-900": !isDarkMode,
      })}
    >
      <Background />
      <BackgroundBlobs />
      <Navbar />

      <section className="relative px-6 py-12 md:py-20">
        <div className="mx-auto max-w-7xl">
          <motion.h1
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.5 }}
            className={cn("mb-12 text-center text-4xl font-bold md:text-5xl", {
              "text-white": isDarkMode,
              "text-gray-900": !isDarkMode,
            })}
          >
            Партнеры олимпиады
          </motion.h1>

          <motion.div
            initial="hidden"
            animate="visible"
            variants={containerVariants}
            className="grid grid-cols-2 gap-8 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-3"
          >
            {partners.map((partner, index) => (
              <motion.div
                key={index}
                variants={itemVariants}
                whileHover={{ scale: 1.05 }}
                className="flex flex-col items-center"
              >
                <div
                  className={cn(
                    "flex h-40 w-full items-center justify-center rounded-2xl p-6",
                    {
                      "bg-[#1e293b]/50": isDarkMode,
                      "bg-white shadow-md": !isDarkMode,
                    },
                  )}
                >
                  <img
                    src={getLogo(partner.logo)}
                    alt={partner.name}
                    className={cn("object-contain", partner.size)}
                  />
                </div>
                <motion.p
                  className={cn("mt-4 text-center text-xl", {
                    "text-gray-300": isDarkMode,
                    "text-gray-600": !isDarkMode,
                  })}
                >
                  {partner.name}
                </motion.p>
              </motion.div>
            ))}
          </motion.div>

          <div className="mt-10 flex items-center justify-center">
            <Link to="/">
              <Button className="px-7 py-3">Вернуться на главную</Button>
            </Link>
          </div>
        </div>
      </section>

      <Footer />
    </div>
  );
}


import Navbar from "../components/layout/Navbar/Navbar";
import { BackgroundBlobs } from "../components/ui/BackgroundBlobs/BackgroundBlobs";
import { useThemeStore } from "../stores/themeStore";
import cn from "clsx";
import { m } from "framer-motion";
import { fadeUp } from "../components/animations/fadeUp";
import Footer from "../components/layout/Footer/Footer";
import { Button } from "../components/ui/Button";
import { Link } from "react-router-dom";
import { useAuthStore } from "../stores/authStore";
import Background from "../components/ui/Background";

function Passing() {
  const { isDarkMode } = useThemeStore();
  const { isAuthenticated } = useAuthStore();

  return (
    <div
      className={cn("min-h-screen w-screen font-sans", {
        "bg-[#0b0f1a] text-white": isDarkMode,
        "bg-gray-50/20 text-gray-900": !isDarkMode,
      })}
    >
      <Background />
      <BackgroundBlobs />
      <Navbar />

      <section className="flex items-center justify-center px-6 py-12">
        <div className="w-10xl mx-auto max-w-4xl">
          <m.div
            variants={fadeUp}
            initial="hidden"
            animate="visible"
            className="space-y-8"
          >
            <h2
              className={cn("text-center text-4xl font-bold md:text-5xl", {
                "text-white": isDarkMode,
                "text-gray-900": !isDarkMode,
              })}
            >
              Прохождение олимпиады
            </h2>

            <div
              className={cn("rounded-2xl p-8 text-lg", {
                "bg-[#0b0f1a] outline-2 outline-blue-900": isDarkMode,
                "bg-white shadow-md outline-2 outline-blue-500": !isDarkMode,
              })}
            >
              <h3 className="mb-6 text-center text-2xl font-semibold">
                Регистрация для участия в олимпиаде
              </h3>

              <p className="mb-4">
                Для прохождения олимпиады Вам необходимо пройти предварительную
                регистрацию и в личном кабинете выбрать соответствующий профиль.
              </p>

              <div className="mb-4 flex justify-center">
                {isAuthenticated ? (
                  <Link to="/profile">
                    <Button className="px-7 py-3">
                      Перейти в личный кабинет
                    </Button>
                  </Link>
                ) : (
                  <Link to="/registration">
                    <Button className="px-7 py-3">Регистрация</Button>
                  </Link>
                )}
              </div>

              <p className="mb-4">
                После регистрации на сайте и подтверждения профиля олимпиады вам
                на указанную почту в течении <b>двух рабочих дней</b> будет
                выслан логин и пароль для прохождения тестирования <br /> Данные
                будут отправлены с данной электронной почты:{" "}
                <a
                  href="mailto:olimpiada.mosu@mail.ru"
                  className={cn("font-medium", {
                    "text-blue-400": isDarkMode,
                    "text-blue-600": !isDarkMode,
                  })}
                >
                  olimpiada.mosu@mail.ru
                </a>
                <p className="font-bold">
                  В случае отсутствия письма, просьба обращаться по
                  вышеуказанной электронной почте
                </p>
              </p>
              <p className="mb-4">
                Доступ к тестовым заданиям откроется в 00:00 24 ноября 2025 года
                на платформе. <br />
              </p>
              {isAuthenticated && (
                <p className="mb-4">
                  Для прохождения Отборочного этапа олимпиады{" "}
                  <a
                    className="font-bold text-blue-500 underline"
                    href="https://moodle.mosu-mvd.com"
                    target="_blank"
                    rel="noopener noreferrer"
                  >
                    перейдите по ссылке
                  </a>
                </p>
              )}
            </div>

            <div className="flex justify-center">
              <Link to="/">
                <Button className="px-7 py-3">Вернуться на главную</Button>
              </Link>
            </div>
          </m.div>
        </div>
      </section>

      <Footer />
    </div>
  );
}

export default Passing;


import { useEffect, useState } from "react";
import Navbar from "../components/layout/Navbar/Navbar";
import Footer from "../components/layout/Footer/Footer";
import { BackgroundBlobs } from "../components/ui/BackgroundBlobs/BackgroundBlobs";
import { fadeUp } from "../components/animations/fadeUp";
import { m } from "framer-motion";
import { useThemeStore } from "../stores/themeStore";
import cn from "clsx";
import { useAuthStore } from "../stores/authStore";
import axios from "axios";
import { getCustomToastStyle } from "../components/ui/toastStyles";
import { toast, ToastContainer } from "react-toastify";

interface SelectedOlympiad {
  name: string;
  date: string;
  description: string | null;
}

interface UserData {
  firstName: string;
  middleName: string;
  lastName: string;
  birthDate: string;
  email: string;
  phoneNumber: string;
  residenceRegion: string;
  residenceSettlement: string;
  educationalInstitution: string;
  institutionAddress: string;
  postalAddress: string;
  snils: string;
  gender: string;
  classCourse: string;
  selectedOlympiads?: SelectedOlympiad[];
}

export default function Profile() {
  const API_URL = import.meta.env.VITE_API_URL;
  const { isDarkMode } = useThemeStore();
  const { token } = useAuthStore();
  const [isLoading, setIsLoading] = useState(true);
  const [userData, setUserData] = useState<UserData>({
    firstName: "",
    middleName: "",
    lastName: "",
    birthDate: "",
    email: "",
    phoneNumber: "",
    residenceRegion: "",
    residenceSettlement: "",
    educationalInstitution: "",
    institutionAddress: "",
    postalAddress: "",
    snils: "",
    gender: "",
    classCourse: "",
  });

  // Загрузка данных профиля
  useEffect(() => {
    const fetchProfile = async () => {
      try {
        const response = await axios.get<UserData>(`${API_URL}/profile`, {
          headers: {
            Authorization: `Bearer ${token}`,
          },
        });

        console.log(response.data);
        setUserData(response.data);
      } catch (error) {
        if (axios.isAxiosError(error)) {
          toast.error(
            "Ошибка загрузки профиля",
            getCustomToastStyle(isDarkMode),
          );
        }
        console.error("Failed to fetch profile:", error);
      } finally {
        setIsLoading(false);
      }
    };

    if (token) {
      fetchProfile();
    }
  }, [token, isDarkMode]);

  if (isLoading) {
    return (
      <div
        className={cn(
          "flex min-h-screen w-screen items-center justify-center font-sans",
          {
            "bg-[#0b0f1a] text-white": isDarkMode,
            "bg-gray-50 text-gray-900": !isDarkMode,
          },
        )}
      >
        <div className="text-xl">Загрузка профиля...</div>
      </div>
    );
  }

  return (
    <div
      className={cn("min-h-screen w-screen font-sans", {
        "bg-[#0b0f1a] text-white": isDarkMode,
        "bg-gray-50 text-gray-900": !isDarkMode,
      })}
    >
      <BackgroundBlobs />
      <Navbar />
      <ToastContainer />
      {/* Плашка с предупреждением */}
      <m.div
        initial={{ opacity: 0, y: -20 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ duration: 0.5 }}
        className={cn("w-full border-b px-4 py-3", {
          "border-yellow-600/30 bg-yellow-500/20 text-yellow-200": isDarkMode,
          "border-yellow-300 bg-yellow-100 text-yellow-800": !isDarkMode,
        })}
      >
        <div className="mx-auto">
          <div className="flex items-center justify-center gap-3">
            <svg
              className={cn("flex-shrink-0", {
                "text-yellow-400": isDarkMode,
                "text-yellow-600": !isDarkMode,
              })}
              width="22"
              height="22"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              strokeWidth="2"
              strokeLinecap="round"
              strokeLinejoin="round"
            >
              <circle cx="12" cy="12" r="10" />
              <line x1="4.93" y1="4.93" x2="19.07" y2="19.07" />
            </svg>
            <span className="text-center text-sm font-medium sm:text-base">
              В случае если вы допустили ошибку в учетных данных, просьба
              направить письмо с описанием проблемы на электронную почту{" "}
              <a
                href="mailto:olimpiada.mosu@mail.ru"
                className={cn("font-medium", {
                  "text-blue-400": isDarkMode,
                  "text-blue-600": !isDarkMode,
                })}
              >
                olimpiada.mosu@mail.ru
              </a>,{" "}
               указав в теме письма: «Личный кабинет»
            </span>
          </div>
        </div>
      </m.div>
      {/* Основной блок с профилем */}
      <section
        className={cn("relative min-h-[80vh] px-6 py-12", {
          "bg-gradient-to-br from-blue-50 via-blue-100 to-blue-200":
            !isDarkMode,
        })}
      >
        <div className="mx-auto grid h-full max-w-7xl grid-cols-1 gap-8 md:grid-cols-[300px_1fr]">
          {/* ФИО и почта */}
          <div className="flex h-full flex-col">
            <m.div
              variants={fadeUp}
              initial="hidden"
              animate="visible"
              className={cn(
                "flex h-full flex-1 flex-col rounded-2xl p-6 shadow-lg",
                {
                  "border border-blue-800/30 bg-[#161b22]/50": isDarkMode,
                  "border border-gray-200 bg-white shadow-md": !isDarkMode,
                },
              )}
            >
              <h2
                className={cn("mb-6 text-2xl font-bold", {
                  "text-blue-300": isDarkMode,
                  "text-blue-600": !isDarkMode,
                })}
              >
                Личные данные
              </h2>

              <div className="space-y-6">
                <div>
                  <h3
                    className={cn("text-lg font-semibold", {
                      "text-gray-400": isDarkMode,
                      "text-gray-500": !isDarkMode,
                    })}
                  >
                    ФИО
                  </h3>
                  <p className="mt-1 text-xl">
                    {userData.lastName} {userData.firstName}{" "}
                    {userData.middleName}
                  </p>
                </div>

                <div>
                  <h3
                    className={cn("text-lg font-semibold", {
                      "text-gray-400": isDarkMode,
                      "text-gray-500": !isDarkMode,
                    })}
                  >
                    Электронная почта
                  </h3>
                  <p className="mt-1 text-xl">{userData.email}</p>
                </div>
              </div>
            </m.div>
          </div>

          {/* Остальные данные */}
          <div className="flex h-full w-full flex-col">
            <div
              className={cn(
                "relative h-full flex-1 rounded-2xl p-6 shadow-lg",
                {
                  "border border-blue-800/30 bg-[#161b22]/50": isDarkMode,
                  "border border-gray-200 bg-white shadow-md": !isDarkMode,
                },
              )}
            >
              <div className="mb-6">
                <h2
                  className={cn("text-2xl font-bold", {
                    "text-blue-300": isDarkMode,
                    "text-blue-600": !isDarkMode,
                  })}
                >
                  Общая информация
                </h2>
              </div>

              <div className="grid grid-cols-1 gap-6 md:grid-cols-2">
                {/* Первая колонка */}
                <div className="space-y-6">
                  <div>
                    <h3
                      className={cn("mb-2 text-lg font-semibold", {
                        "text-gray-400": isDarkMode,
                        "text-gray-500": !isDarkMode,
                      })}
                    >
                      Дата рождения
                    </h3>
                    <p className="mt-1 text-xl">{userData.birthDate}</p>
                  </div>

                  <div>
                    <h3
                      className={cn("mb-2 text-lg font-semibold", {
                        "text-gray-400": isDarkMode,
                        "text-gray-500": !isDarkMode,
                      })}
                    >
                      Пол
                    </h3>
                    <p className="mt-1 text-xl">
                      {userData.gender === "MALE" ? "Мужской" : "Женский"}
                    </p>
                  </div>

                  <div>
                    <h3
                      className={cn("mb-2 text-lg font-semibold", {
                        "text-gray-400": isDarkMode,
                        "text-gray-500": !isDarkMode,
                      })}
                    >
                      Класс/Курс
                    </h3>
                    <p className="mt-1 text-xl">{userData.classCourse}</p>
                  </div>

                  <div>
                    <h3
                      className={cn("mb-2 text-lg font-semibold", {
                        "text-gray-400": isDarkMode,
                        "text-gray-500": !isDarkMode,
                      })}
                    >
                      Телефон
                    </h3>
                    <p className="mt-1 text-xl">{userData.phoneNumber}</p>
                  </div>

                  <div>
                    <h3
                      className={cn("mb-2 text-lg font-semibold", {
                        "text-gray-400": isDarkMode,
                        "text-gray-500": !isDarkMode,
                      })}
                    >
                      Почтовый адрес
                    </h3>
                    <p className="mt-1 text-xl">{userData.postalAddress}</p>
                  </div>
                </div>

                {/* Вторая колонка */}
                <div className="space-y-6">
                  <div>
                    <h3
                      className={cn("mb-2 text-lg font-semibold", {
                        "text-gray-400": isDarkMode,
                        "text-gray-500": !isDarkMode,
                      })}
                    >
                      Учебное заведение
                    </h3>
                    <p className="mt-1 text-xl">
                      {userData.educationalInstitution}
                    </p>
                  </div>

                  <div>
                    <h3
                      className={cn("mb-2 text-lg font-semibold", {
                        "text-gray-400": isDarkMode,
                        "text-gray-500": !isDarkMode,
                      })}
                    >
                      Регион организации
                    </h3>
                    <p className="mt-1 text-xl">
                      {userData.institutionAddress}
                    </p>
                  </div>

                  <div>
                    <h3
                      className={cn("mb-2 text-lg font-semibold", {
                        "text-gray-400": isDarkMode,
                        "text-gray-500": !isDarkMode,
                      })}
                    >
                      Регион проживания
                    </h3>
                    <p className="mt-1 text-xl">{userData.residenceRegion}</p>
                  </div>

                  <div>
                    <h3
                      className={cn("mb-2 text-lg font-semibold", {
                        "text-gray-400": isDarkMode,
                        "text-gray-500": !isDarkMode,
                      })}
                    >
                      Населенный пункт
                    </h3>
                    <p className="mt-1 text-xl">
                      {userData.residenceSettlement}
                    </p>
                  </div>

                  <div>
                    <h3
                      className={cn("mb-2 text-lg font-semibold", {
                        "text-gray-400": isDarkMode,
                        "text-gray-500": !isDarkMode,
                      })}
                    >
                      СНИЛС
                    </h3>
                    <p className="mt-1 text-xl">{userData.snils}</p>
                  </div>
                </div>
              </div>

              {/* Блок выбранных олимпиад */}
              {userData.selectedOlympiads &&
                userData.selectedOlympiads.length > 0 && (
                  <div className="mt-8">
                    <h3
                      className={cn("mb-4 text-xl font-bold", {
                        "text-blue-300": isDarkMode,
                        "text-blue-600": !isDarkMode,
                      })}
                    >
                      Выбранные профили олимпиад
                    </h3>

                    <div className="grid grid-cols-1 gap-4 md:grid-cols-2">
                      {userData.selectedOlympiads.map((olympiad, index) => (
                        <div
                          key={index}
                          className={cn("rounded-lg border-2 p-4", {
                            "border-blue-500 bg-blue-500/10": isDarkMode,
                            "border-blue-400 bg-blue-50": !isDarkMode,
                          })}
                        >
                          <div className="flex items-start">
                            <div
                              className={cn(
                                "mt-1 mr-3 flex h-5 w-5 flex-shrink-0 items-center justify-center rounded-full border-2",
                                {
                                  "border-blue-500 bg-blue-500 text-white":
                                    isDarkMode,
                                  "border-blue-400 bg-blue-400 text-white":
                                    !isDarkMode,
                                },
                              )}
                            >
                              <svg
                                xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 20 20"
                                fill="currentColor"
                                className="h-3 w-3"
                              >
                                <path
                                  fillRule="evenodd"
                                  d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z"
                                  clipRule="evenodd"
                                />
                              </svg>
                            </div>
                            <div className="flex-1">
                              <h3 className="text-lg font-semibold">
                                {olympiad.name}
                              </h3>
                              {olympiad.description && (
                                <p
                                  className={cn("mt-2 text-sm", {
                                    "text-gray-600": !isDarkMode,
                                    "text-gray-300": isDarkMode,
                                  })}
                                >
                                  {olympiad.description}
                                </p>
                              )}
                              <div className="mt-2 text-sm font-medium text-blue-500">
                                Выбрано
                              </div>
                            </div>
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>
                )}
            </div>
          </div>
        </div>
      </section>

      <Footer />
    </div>
  );
}


// import { Link } from "react-router-dom";
// import cn from "clsx";
// import { m } from "framer-motion";
// import { useThemeStore } from "../stores/themeStore";
// import { Button } from "../components/ui/Button";
// import Footer from "../components/layout/Footer/Footer";
// import { fadeUp } from "../components/animations/fadeUp";
// import { BackgroundBlobs } from "../components/ui/BackgroundBlobs/BackgroundBlobs";
// import Navbar from "../components/layout/Navbar/Navbar";
// import { columnVariants } from "../components/animations/columnVariants";
// import { qualifResults } from "../../data/mockData";
// import { useState } from "react";
// import { useDebounce } from "../../hooks/useDebounce";

// function QualifyingResults() {
//   const { isDarkMode } = useThemeStore();
//   const [searchTerm, setSearchTerm] = useState("");

//   const debouncedSearch = useDebounce(searchTerm, 400);

//   // Фильтрация и сортировка с использованием поискового значения
//   const sortedParticipants = [...qualifResults].sort(
//     (a, b) => b.score - a.score,
//   );

//   // Фильтр с сохранением места в рей
//   const filteredParticipants = sortedParticipants.filter((participant) => {
//     const fullName =
//       `${participant.lastName} ${participant.firstName} ${participant.middleName}`.toLowerCase();
//     return fullName.includes(debouncedSearch.toLowerCase().trim());
//   });

//   return (
//     <div
//       className={cn("min-h-screen w-screen font-sans", {
//         "bg-[#0b0f1a] text-white": isDarkMode,
//         "bg-gray-50/20 text-gray-900": !isDarkMode,
//       })}
//     >
//       <BackgroundBlobs />
//       <Navbar />

//       <section className="flex items-center justify-center px-6 py-12">
//         <div className="w-10xl mx-auto max-w-6xl">
//           <m.div
//             variants={fadeUp}
//             initial="hidden"
//             animate="visible"
//             className="space-y-8"
//           >
//             <h2
//               className={cn("text-center text-4xl font-bold md:text-5xl", {
//                 "text-white": isDarkMode,
//                 "text-gray-900": !isDarkMode,
//               })}
//             >
//               Результаты Отборочного этапа
//             </h2>

//             <div
//               className={cn("rounded-2xl p-8 text-lg", {
//                 "bg-[#0b0f1a] outline-2 outline-blue-900": isDarkMode,
//                 "bg-white shadow-md outline-2 outline-blue-500": !isDarkMode,
//               })}
//             >
//               <p className="mb-6">
//                 Рейтинговая таблица итогов проведения Отборочного этапа
//                 Олимпиады школьников «Университет цифровой полиции» по
//                 информационной безопасности.
//               </p>

//               <div className="mb-6 rounded-lg border border-blue-900/20 bg-blue-900/10 p-4">
//                 <p className="font-semibold">
//                   Участники, набравшие больше 20 баллов, получают электронный
//                   сертификат участника Олимпиады.
//                 </p>
//               </div>

//               <a
//                 href="https://mvd.ru/upload/site116/folder_page/045/106/727/final_20_3.pdf"
//                 className="mb-4 text-xl font-semibold text-blue-300"
//                 target="_blank"
//                 rel="noopener noreferrer"
//               >
//                 Участники, прошедшие в финал Олимпиады школьников «Университет
//                 цифровой полиции» по информационной безопасности 2024-2025
//                 учебного года.
//               </a>

//               {/* Поле поиска */}
//               <div className="mt-6">
//                 <label
//                   htmlFor="search"
//                   className="text-md mb-2 block font-medium"
//                 >
//                   Поиск по ФИО
//                 </label>
//                 <input
//                   id="search"
//                   type="text"
//                   placeholder="Введите фамилию, имя или отчество..."
//                   value={searchTerm}
//                   onChange={(e) => setSearchTerm(e.target.value)}
//                   className={cn(
//                     "w-full rounded-lg border px-4 py-2 text-base focus:ring-2 focus:outline-none",
//                     {
//                       "border-blue-700 bg-gray-800 text-white focus:ring-blue-500":
//                         isDarkMode,
//                       "border-blue-300 bg-white text-gray-900 focus:ring-blue-400":
//                         !isDarkMode,
//                     },
//                   )}
//                 />
//               </div>

//               {/* Таблица участников */}
//               <div className="mt-6 overflow-x-auto">
//                 <table className="w-full">
//                   <thead>
//                     <tr
//                       className={cn({
//                         "bg-blue-800/30": isDarkMode,
//                         "bg-blue-200": !isDarkMode,
//                       })}
//                     >
//                       {["№ п/п", "Фамилия", "Имя", "Отчество", "Балл"].map(
//                         (header, i) => (
//                           <m.th
//                             key={i}
//                             custom={i}
//                             initial="hidden"
//                             animate="visible"
//                             variants={columnVariants}
//                             className={cn(
//                               "px-4 py-3 text-center align-middle",
//                               {
//                                 "text-blue-300": isDarkMode,
//                                 "text-blue-800": !isDarkMode,
//                               },
//                             )}
//                           >
//                             {header}
//                           </m.th>
//                         ),
//                       )}
//                     </tr>
//                   </thead>
//                   <tbody>
//                     {filteredParticipants.length > 0 ? (
//                       filteredParticipants.map((participant) => {
//                         // Настоящий номер в рейтинге
//                         const rank =
//                           sortedParticipants.findIndex(
//                             (p) => p.id === participant.id,
//                           ) + 1;
//                         return (
//                           <tr
//                             key={participant.id}
//                             className={cn("border-b", {
//                               "border-blue-700/30 hover:bg-blue-900/10":
//                                 isDarkMode,
//                               "border-blue-200 hover:bg-blue-100": !isDarkMode,
//                             })}
//                           >
//                             <m.td
//                               custom={0}
//                               initial="hidden"
//                               animate="visible"
//                               variants={columnVariants}
//                               className="px-4 py-3 text-center"
//                             >
//                               {rank}
//                             </m.td>
//                             <m.td
//                               custom={1}
//                               initial="hidden"
//                               animate="visible"
//                               variants={columnVariants}
//                               className="px-4 py-3 text-center"
//                             >
//                               {participant.lastName}
//                             </m.td>
//                             <m.td
//                               custom={2}
//                               initial="hidden"
//                               animate="visible"
//                               variants={columnVariants}
//                               className="px-4 py-3 text-center"
//                             >
//                               {participant.firstName}
//                             </m.td>
//                             <m.td
//                               custom={3}
//                               initial="hidden"
//                               animate="visible"
//                               variants={columnVariants}
//                               className="px-4 py-3 text-center"
//                             >
//                               {participant.middleName}
//                             </m.td>
//                             <m.td
//                               custom={6}
//                               initial="hidden"
//                               animate="visible"
//                               variants={columnVariants}
//                               className={cn(
//                                 "px-4 py-3 text-center font-medium",
//                                 {
//                                   "text-blue-400": isDarkMode,
//                                   "text-blue-600": !isDarkMode,
//                                 },
//                               )}
//                             >
//                               {participant.score}
//                             </m.td>
//                           </tr>
//                         );
//                       })
//                     ) : (
//                       <m.tr
//                         initial="hidden"
//                         animate="visible"
//                         variants={columnVariants}
//                       >
//                         <td
//                           colSpan={5}
//                           className="px-4 py-8 text-center text-lg"
//                         >
//                           <p
//                             className={cn({
//                               "text-blue-300": isDarkMode,
//                               "text-blue-700": !isDarkMode,
//                             })}
//                           >
//                             Участник не найден
//                           </p>
//                         </td>
//                       </m.tr>
//                     )}
//                   </tbody>
//                 </table>
//               </div>

//               <div className="mt-8 flex flex-col justify-center gap-4 sm:flex-row">
//                 <a
//                   href="https://mvd.ru/upload/site116/folder_page/045/106/727/Ranzhirovannye_spiski_2_compressed.pdf"
//                   target="_blank"
//                   rel="noopener noreferrer"
//                 >
//                   <Button>Открыть полную рейтинговую таблицу (PDF)</Button>
//                 </a>
//               </div>
//             </div>

//             <div className="flex justify-center gap-4">
//               <Link to="/">
//                 <Button className="px-7 py-3">Вернуться на главную</Button>
//               </Link>
//             </div>
//           </m.div>
//         </div>
//       </section>

//       <Footer />
//     </div>
//   );
// }

// export default QualifyingResults;


// import { m } from "framer-motion";
// import Navbar from "../components/layout/Navbar/Navbar";
// import { BackgroundBlobs } from "../components/ui/BackgroundBlobs/BackgroundBlobs";
// import { Button } from "../components/ui/Button";
// import { useThemeStore } from "../stores/themeStore";
// import cn from "clsx";
// import Footer from "../components/layout/Footer/Footer";
// import { columnVariants } from "../components/animations/columnVariants";
// import { rankings } from "../../data/mockData";

// const Rankings = () => {
//   const { isDarkMode } = useThemeStore();

//   // Filter winners
//   const winners = rankings.filter(
//     (participant) => participant.status !== "Участник",
//   );

//   return (
//     <div
//       className={cn("flex min-h-screen w-screen flex-col font-sans", {
//         "bg-[#0b0f1a] text-white": isDarkMode,
//         "bg-gray-50 text-gray-900": !isDarkMode,
//       })}
//     >
//       <BackgroundBlobs />
//       <Navbar />
//       <div className="flex flex-1 flex-col items-center gap-8 p-4">
//         {/* Работы победителей */}
//         {winners.length > 0 && (
//           <m.div
//             initial={{ opacity: 0, y: 20 }}
//             animate={{ opacity: 1, y: 0 }}
//             transition={{ duration: 0.5 }}
//             className={cn(
//               "w-full max-w-6xl rounded-2xl border border-blue-600 p-8 shadow-xl",
//               {
//                 "bg-gradient-to-br from-[#0f172a] via-[#101b36] to-[#14213d]":
//                   isDarkMode,
//                 "bg-gradient-to-br from-blue-50 to-blue-100": !isDarkMode,
//               },
//             )}
//           >
//             <div className="mb-6 flex flex-col items-center">
//               <h2 className="text-3xl font-bold">Проекты победителей</h2>
//             </div>

//             <div className="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3">
//               {winners.map((winner, index) => (
//                 <m.div
//                   key={`winner-${winner.id}`}
//                   initial={{ opacity: 0, y: 20 }}
//                   animate={{ opacity: 1, y: 0 }}
//                   transition={{ delay: index * 0.1 }}
//                   className={cn(
//                     "rounded-lg p-4 transition-all hover:shadow-lg",
//                     {
//                       "bg-blue-900/20 hover:bg-blue-900/30": isDarkMode,
//                       "bg-blue-200/40": !isDarkMode,
//                     },
//                   )}
//                 >
//                   <h2 className="text-lg font-bold text-blue-400">
//                     {winner.status}
//                   </h2>
//                   <h3 className="justify-center text-lg font-semibold">
//                     {winner.lastName} {winner.firstName} {winner.middleName}
//                   </h3>
//                   <p className="text-md opacity-80">{winner.region}</p>
//                   <p className="my-2 font-bold">{winner.score} баллов</p>
//                   {winner.details ? (
//                     <a
//                       href={winner.details}
//                       target="_blank"
//                       rel="noopener noreferrer"
//                     >
//                       <Button
//                         className={cn("mt-2 w-full text-sm", {
//                           "bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400":
//                             isDarkMode,
//                           "bg-gradient-to-r from-blue-500 to-blue-400 hover:from-blue-400 hover:to-blue-300":
//                             !isDarkMode,
//                         })}
//                       >
//                         Посмотреть работу
//                       </Button>
//                     </a>
//                   ) : (
//                     <p className="mt-2 text-sm opacity-70">
//                       Работа не загружена
//                     </p>
//                   )}
//                 </m.div>
//               ))}
//             </div>
//           </m.div>
//         )}

//         <m.div
//           initial={{ opacity: 0, y: 20 }}
//           animate={{ opacity: 1, y: 0 }}
//           transition={{ duration: 0.5 }}
//           className={cn(
//             "w-full max-w-6xl rounded-2xl border border-blue-600 p-8 shadow-xl",
//             {
//               "bg-gradient-to-br from-[#0f172a] via-[#101b36] to-[#14213d]":
//                 isDarkMode,
//               "bg-gradient-to-br from-blue-50 to-blue-100": !isDarkMode,
//             },
//           )}
//         >
//           <div className="mb-8 flex flex-col items-center">
//             <h1 className="mb-2 text-4xl font-bold">Итоги Олимпиады</h1>
//             <div
//               className={cn("w-full border-b py-4 text-center", {
//                 "border-blue-700/30": isDarkMode,
//                 "border-blue-300": !isDarkMode,
//               })}
//             >
//               <h3 className="mt-2 text-xl">
//                 Рейтинговая таблица заключительного этапа олимпиады школьников
//               </h3>
//             </div>
//             <m.div
//               initial={{ opacity: 0 }}
//               animate={{ opacity: 1 }}
//               transition={{ delay: 0.8 }}
//               className={cn("text-md mt-6 text-center font-bold", {
//                 "text-blue-300/80": isDarkMode,
//                 "text-blue-600/80": !isDarkMode,
//               })}
//             >
//               <p>Кнопки кликабельны и ведут к проектам в цифровом формате</p>
//             </m.div>
//           </div>

//           <div className="overflow-x-auto">
//             <table className="w-full">
//               <thead>
//                 <tr
//                   className={cn({
//                     "bg-blue-800/30": isDarkMode,
//                     "bg-blue-200": !isDarkMode,
//                   })}
//                 >
//                   {[
//                     "№ п/п",
//                     "Фамилия",
//                     "Имя",
//                     "Отчество",
//                     "Класс/Курс",
//                     "Регион",
//                     "Балл",
//                     "Статус",
//                   ].map((header, i) => (
//                     <m.th
//                       key={i}
//                       custom={i}
//                       initial="hidden"
//                       animate="visible"
//                       variants={columnVariants}
//                       className={cn("px-4 py-3 text-center align-middle", {
//                         "text-blue-300": isDarkMode,
//                         "text-blue-800": !isDarkMode,
//                       })}
//                     >
//                       {header}
//                     </m.th>
//                   ))}
//                 </tr>
//               </thead>
//               <tbody>
//                 {[...rankings]
//                   .sort((a, b) => b.score - a.score)
//                   .map((participant, index) => (
//                     <tr
//                       key={participant.id}
//                       className={cn("border-b", {
//                         "border-blue-700/30 hover:bg-blue-900/10": isDarkMode,
//                         "border-blue-200 hover:bg-blue-100": !isDarkMode,
//                       })}
//                     >
//                       <m.td
//                         custom={0}
//                         initial="hidden"
//                         animate="visible"
//                         variants={columnVariants}
//                         className="px-4 py-3 text-center"
//                       >
//                         {index + 1}
//                       </m.td>
//                       <m.td
//                         custom={1}
//                         initial="hidden"
//                         animate="visible"
//                         variants={columnVariants}
//                         className="px-4 py-3 text-center"
//                       >
//                         {participant.lastName}
//                       </m.td>
//                       <m.td
//                         custom={2}
//                         initial="hidden"
//                         animate="visible"
//                         variants={columnVariants}
//                         className="px-4 py-3 text-center"
//                       >
//                         {participant.firstName}
//                       </m.td>
//                       <m.td
//                         custom={3}
//                         initial="hidden"
//                         animate="visible"
//                         variants={columnVariants}
//                         className="px-4 py-3 text-center"
//                       >
//                         {participant.middleName}
//                       </m.td>
//                       <m.td
//                         custom={4}
//                         initial="hidden"
//                         animate="visible"
//                         variants={columnVariants}
//                         className="px-4 py-3 text-center"
//                       >
//                         {participant.grade}
//                       </m.td>
//                       <m.td
//                         custom={5}
//                         initial="hidden"
//                         animate="visible"
//                         variants={columnVariants}
//                         className="px-4 py-3 text-center"
//                       >
//                         {participant.region}
//                       </m.td>
//                       <m.td
//                         custom={6}
//                         initial="hidden"
//                         animate="visible"
//                         variants={columnVariants}
//                         className={cn("px-4 py-3 text-center font-medium", {
//                           "text-blue-400": isDarkMode,
//                           "text-blue-600": !isDarkMode,
//                         })}
//                       >
//                         {participant.score}
//                       </m.td>
//                       <m.td
//                         custom={7}
//                         initial="hidden"
//                         animate="visible"
//                         variants={columnVariants}
//                         className="px-4 py-3 text-center"
//                       >
//                         <Button
//                           className={cn("text-md w-2xs px-2 py-2", {
//                             "bg-gray-600/50 hover:bg-gray-600/70": isDarkMode,
//                             "bg-gray-300 hover:bg-gray-400": !isDarkMode,
//                           })}
//                           disabled
//                         >
//                           {participant.status}
//                         </Button>
//                       </m.td>
//                     </tr>
//                   ))}
//               </tbody>
//             </table>
//           </div>
//         </m.div>
//       </div>
//       <Footer />
//     </div>
//   );
// };

// export default Rankings;


import { BackgroundBlobs } from "../components/ui/BackgroundBlobs/BackgroundBlobs";
import { Button } from "../components/ui/Button";
import Navbar from "../components/layout/Navbar/Navbar";
import Footer from "../components/layout/Footer/Footer";
import Input from "../components/ui/Input";
import Select from "../components/ui/Select";
import { fadeUp } from "../components/animations/fadeUp";
import { SubmitHandler, useForm } from "react-hook-form";
import { m } from "framer-motion";
import cn from "clsx";
import { useThemeStore } from "../stores/themeStore";
import { ToastContainer, toast } from "react-toastify";
import { getCustomToastStyle } from "../components/ui/toastStyles";
import { useState, useEffect } from "react";
import { useNavigate } from "react-router-dom";
import axios from "axios";
import { useAuthStore } from "../stores/authStore";
import { regions } from "../../data/mockData";
import { IOlympiad } from "../types/IOlympiads.type";

interface RegistrationForm {
  firstName: string;
  middleName: string;
  lastName: string;
  birthDate: string;
  email: string;
  phoneNumber: string;
  residenceRegion: string;
  residenceSettlement: string;
  settlementType: string;
  educationalInstitution: string;
  institutionAddress: string;
  postalAddress: string;
  snils: string;
  gender: string;
  classCourse: string;
  password: string;
  confirmPassword: string;
  agreeToTerms: boolean;
  agreeToRegulations: boolean;
}

interface Olympiad {
  name: string;
  description: string | null;
}

function Registration() {
  const API_URL = import.meta.env.VITE_API_URL;
  const { setToken } = useAuthStore();
  const [isLoading, setIsLoading] = useState(false);
  const [olympiads, setOlympiads] = useState<Olympiad[]>([]);
  const [selectedOlympiadNames, setSelectedOlympiadNames] = useState<
    Set<string>
  >(new Set());
  const [olympiadsLoading, setOlympiadsLoading] = useState(false);
  const { isDarkMode } = useThemeStore();
  const navigate = useNavigate();

  // Состояния для пошагового процесса
  const [currentStep, setCurrentStep] = useState(1); // 1 - форма, 2 - подтверждение, 3 - выбор олимпиад
  const [formData, setFormData] = useState<RegistrationForm | null>(null);
  const [showConfirmationModal, setShowConfirmationModal] = useState(false);
  const [isSubmittingOlympiads, setIsSubmittingOlympiads] = useState(false);
  const [registrationToken, setRegistrationToken] = useState<string | null>(
    null,
  );

  const {
    register,
    handleSubmit,
    formState: { errors },
    watch,
  } = useForm<RegistrationForm>();

  const password = watch("password");

  // Загрузка списка олимпиад только когда переходим на шаг 3 и есть токен
  useEffect(() => {
    const fetchOlympiads = async () => {
      if (currentStep !== 3 || !registrationToken) return;

      setOlympiadsLoading(true);
      try {
        const response = await axios.get<IOlympiad[]>(`${API_URL}/olympiads`, {
          headers: {
            Authorization: `Bearer ${registrationToken}`,
          },
        });

        setOlympiads(response.data);
      } catch (error) {
        console.error("Failed to fetch olympiads:", error);
        toast.error(
          "Не удалось загрузить список олимпиад",
          getCustomToastStyle(isDarkMode),
        );
      } finally {
        setOlympiadsLoading(false);
      }
    };

    fetchOlympiads();
  }, [currentStep, registrationToken, API_URL, isDarkMode]);

  // Валидация пароля
  const validatePassword = (value: string) => {
    if (value.length < 6) {
      return "Пароль должен содержать минимум 6 символов";
    }
    if (!/[A-Z]/.test(value)) {
      return "Пароль должен содержать хотя бы одну заглавную букву";
    }
    if (!/[0-9]/.test(value)) {
      return "Пароль должен содержать хотя бы одну цифру";
    }
    return true;
  };

  // Валидация подтверждения пароля
  const validateConfirmPassword = (value: string) => {
    return value === password || "Пароли не совпадают";
  };

  // Валидация даты рождения
  const validateBirthDate = (value: string) => {
    if (!value) return "Обязательное поле";

    const birthDate = new Date(value);
    const now = new Date();
    const minDate = new Date("2000-01-01");

    if (now < birthDate) {
      return "Дата рождения не может быть в будущем";
    }

    if (birthDate < minDate) {
      return "Минимальный год рождения - 2000";
    }

    return true;
  };

  // Получение максимальной даты для input (сегодня)
  const getMaxDate = () => {
    return new Date().toISOString().split("T")[0];
  };

  // Получение минимальной даты для input (2000-01-01)
  const getMinDate = () => {
    return "2000-01-01";
  };

  const handleOlympiadChange = (name: string) => {
    setSelectedOlympiadNames((prev) => {
      const newSet = new Set(prev);
      if (newSet.has(name)) {
        newSet.delete(name);
      } else {
        newSet.add(name);
      }
      return newSet;
    });
  };

  // Шаг 1: Подтверждение данных
  const handleFormSubmit: SubmitHandler<RegistrationForm> = (data) => {
    setFormData(data);
    setShowConfirmationModal(true);
  };

  // Шаг 2: Отправка данных регистрации
  const handleConfirmSubmit = async () => {
    if (!formData) return;

    setIsLoading(true);
    try {
      const response = await axios.post(`${API_URL}/auth/register`, {
        email: formData.email,
        password: formData.password,
        firstName: formData.firstName,
        middleName: formData.middleName,
        lastName: formData.lastName,
        birthDate: formData.birthDate,
        phoneNumber: formData.phoneNumber,
        residenceRegion: formData.residenceRegion,
        residenceSettlement: formData.residenceSettlement,
        settlementType: formData.settlementType,
        educationalInstitution: formData.educationalInstitution,
        institutionAddress: formData.institutionAddress,
        postalAddress: formData.postalAddress,
        snils: formData.snils,
        gender: formData.gender,
        classCourse: formData.classCourse,
      });

      // Сохраняем токен в обоих местах
      const newToken = response.data.token;
      setToken(newToken);
      setRegistrationToken(newToken);

      toast.success(
        "Основные данные успешно сохранены!",
        getCustomToastStyle(isDarkMode),
      );

      // Закрываем модальное окно и переходим к выбору олимпиад
      setShowConfirmationModal(false);
      setCurrentStep(3);
    } catch (error) {
      if (axios.isAxiosError(error)) {
        const errorMessage =
          error.response?.data?.message || "Ошибка регистрации";
        toast.error(errorMessage, getCustomToastStyle(isDarkMode));
      } else {
        toast.error("Неизвестная ошибка", getCustomToastStyle(isDarkMode));
      }
      console.error(error);
    } finally {
      setIsLoading(false);
    }
  };

  // Шаг 3: Отправка выбранных олимпиад (логика из профиля)
  const submitSelectedOlympiads = async () => {
    if (selectedOlympiadNames.size === 0) {
      toast.warn(
        "Пожалуйста, выберите хотя бы одну олимпиаду",
        getCustomToastStyle(isDarkMode),
      );
      return;
    }

    setIsSubmittingOlympiads(true);

    try {
      // Отправляем выбранные олимпиады - используем логику из профиля
      await axios.post(
        `${API_URL}/profile/olympiads/select`,
        Array.from(selectedOlympiadNames),
        {
          headers: {
            Authorization: `Bearer ${registrationToken}`,
          },
        },
      );

      toast.success(
        "Регистрация завершена успешно!",
        getCustomToastStyle(isDarkMode),
      );

      // Перенаправляем в профиль
      navigate("/profile");
    } catch (error) {
      if (axios.isAxiosError(error)) {
        const errorMessage =
          error.response?.data?.message || "Ошибка при выборе олимпиад";
        toast.error(errorMessage, getCustomToastStyle(isDarkMode));
      } else {
        toast.error("Неизвестная ошибка", getCustomToastStyle(isDarkMode));
      }
      console.error(error);
    } finally {
      setIsSubmittingOlympiads(false);
    }
  };

  const onError = () => {
    toast.warn(
      "Пожалуйста, заполните все поля корректно",
      getCustomToastStyle(isDarkMode),
    );
  };

  // Рендер шага 1 - форма регистрации
  const renderFormStep = () => (
    <form
      className="grid grid-cols-1 gap-6 sm:gap-8 lg:grid-cols-3"
      onSubmit={handleSubmit(handleFormSubmit, onError)}
    >
      {/* Левая колонка */}
      <section className="space-y-4 sm:space-y-6 lg:space-y-4">
        <div className="flex flex-col gap-1">
          <Input
            type="text"
            placeholder="Фамилия"
            {...register("lastName", { required: "Обязательное поле" })}
          />
          {errors.lastName && (
            <m.p
              className="text-sm text-red-500"
              variants={fadeUp}
              initial="hidden"
              animate="visible"
            >
              {errors.lastName.message}
            </m.p>
          )}
        </div>

        <div className="flex flex-col gap-1">
          <Input
            type="text"
            placeholder="Имя"
            {...register("firstName", { required: "Обязательное поле" })}
          />
          {errors.firstName && (
            <m.p
              className="text-sm text-red-500"
              variants={fadeUp}
              initial="hidden"
              animate="visible"
            >
              {errors.firstName.message}
            </m.p>
          )}
        </div>

        <div className="flex flex-col gap-1">
          <Input
            type="text"
            placeholder="Отчество"
            {...register("middleName", { required: "Обязательное поле" })}
          />
          {errors.middleName && (
            <m.p
              className="text-sm text-red-500"
              variants={fadeUp}
              initial="hidden"
              animate="visible"
            >
              {errors.middleName.message}
            </m.p>
          )}
        </div>

        <div className="relative flex flex-col gap-1">
          <m.label
            className={cn("text-md mb-1 font-medium", {
              "text-white": isDarkMode,
              "text-gray-700": !isDarkMode,
            })}
            variants={fadeUp}
            initial="hidden"
            animate="visible"
          >
            Дата рождения *
          </m.label>
          <Input
            type="date"
            className="peer"
            max={getMaxDate()}
            min={getMinDate()}
            {...register("birthDate", {
              required: "Обязательное поле",
              validate: validateBirthDate,
            })}
          />
          {errors.birthDate && (
            <m.p
              className="text-sm text-red-500"
              variants={fadeUp}
              initial="hidden"
              animate="visible"
            >
              {errors.birthDate.message}
            </m.p>
          )}
        </div>

        <div className="flex flex-col gap-1">
          <Input
            type="email"
            placeholder="Электронная почта"
            {...register("email", {
              required: "Обязательное поле",
              pattern: {
                value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,
                message: "Некорректный email",
              },
            })}
          />
          {errors.email && (
            <m.p
              className="text-sm text-red-500"
              variants={fadeUp}
              initial="hidden"
              animate="visible"
            >
              {errors.email.message}
            </m.p>
          )}
        </div>

        <div className="flex flex-col gap-1">
          <Input
            type="tel"
            placeholder="Контактный телефон"
            {...register("phoneNumber", {
              required: "Обязательное поле",
              pattern: {
                value: /^[\d\+][\d\(\)\ -]{4,14}\d$/,
                message: "Некорректный номер телефона",
              },
            })}
          />
          {errors.phoneNumber && (
            <m.p
              className="text-sm text-red-500"
              variants={fadeUp}
              initial="hidden"
              animate="visible"
            >
              {errors.phoneNumber.message}
            </m.p>
          )}
        </div>

        <div className="flex flex-col gap-1">
          <Input
            type="text"
            placeholder="СНИЛС (XXX-XXX-XXX XX)"
            {...register("snils", {
              required: "Обязательное поле",
              pattern: {
                value: /^\d{3}-\d{3}-\d{3} \d{2}$/,
                message: "Формат: XXX-XXX-XXX XX",
              },
            })}
          />
          {errors.snils && (
            <m.p
              className="text-sm text-red-500"
              variants={fadeUp}
              initial="hidden"
              animate="visible"
            >
              {errors.snils.message}
            </m.p>
          )}
        </div>
      </section>

      {/* Средняя колонка */}
      <section className="space-y-4 sm:space-y-6 lg:space-y-4">
        <div className="flex flex-col gap-1">
          <Select
            {...register("residenceRegion", {
              required: "Обязательное поле",
            })}
          >
            <option value="">Выберите регион проживания</option>
            {regions.map((region, index) => (
              <option key={index} value={region}>
                {region}
              </option>
            ))}
          </Select>
          {errors.residenceRegion && (
            <m.p
              className="text-sm text-red-500"
              variants={fadeUp}
              initial="hidden"
              animate="visible"
            >
              {errors.residenceRegion.message}
            </m.p>
          )}
        </div>

        <div className="flex flex-col gap-1">
          <Input
            type="text"
            placeholder="Населенный пункт"
            {...register("residenceSettlement", {
              required: "Обязательное поле",
            })}
          />
          {errors.residenceSettlement && (
            <m.p
              className="text-sm text-red-500"
              variants={fadeUp}
              initial="hidden"
              animate="visible"
            >
              {errors.residenceSettlement.message}
            </m.p>
          )}
        </div>

        {/* Radio button для выбора типа населенного пункта */}
        <div className="flex flex-col gap-3">
          <m.label
            className={cn("text-md font-medium", {
              "text-white": isDarkMode,
              "text-gray-700": !isDarkMode,
            })}
            variants={fadeUp}
            initial="hidden"
            animate="visible"
          >
            Тип населенного пункта: *
          </m.label>
          <div className="flex gap-6">
            <m.label
              className={cn("flex cursor-pointer items-center gap-2", {
                "text-white": isDarkMode,
                "text-gray-700": !isDarkMode,
              })}
              variants={fadeUp}
              initial="hidden"
              animate="visible"
            >
              <input
                type="radio"
                value="Город(ПГТ)"
                {...register("settlementType", {
                  required: "Выберите тип населенного пункта",
                })}
                className={cn(
                  "h-4 w-4 border-2 focus:ring-2 focus:ring-offset-2",
                  {
                    "border-blue-500 text-blue-600 focus:ring-blue-500":
                      !isDarkMode,
                    "border-blue-400 text-blue-400 focus:ring-blue-400":
                      isDarkMode,
                  },
                )}
              />
              <span>Город(ПГТ)</span>
            </m.label>
            <m.label
              className={cn("flex cursor-pointer items-center gap-2", {
                "text-white": isDarkMode,
                "text-gray-700": !isDarkMode,
              })}
              variants={fadeUp}
              initial="hidden"
              animate="visible"
            >
              <input
                type="radio"
                value="Иное"
                {...register("settlementType", {
                  required: "Выберите тип населенного пункта",
                })}
                className={cn(
                  "h-4 w-4 border-2 focus:ring-2 focus:ring-offset-2",
                  {
                    "border-blue-500 text-blue-600 focus:ring-blue-500":
                      !isDarkMode,
                    "border-blue-400 text-blue-400 focus:ring-blue-400":
                      isDarkMode,
                  },
                )}
              />
              <span>Иное</span>
            </m.label>
          </div>
          {errors.settlementType && (
            <m.p
              className="text-sm text-red-500"
              variants={fadeUp}
              initial="hidden"
              animate="visible"
            >
              {errors.settlementType.message}
            </m.p>
          )}
        </div>

        <div className="flex flex-col gap-1">
          <Input
            type="text"
            placeholder="Образовательное учреждение"
            {...register("educationalInstitution", {
              required: "Обязательное поле",
            })}
          />
          {errors.educationalInstitution && (
            <m.p
              className="text-sm text-red-500"
              variants={fadeUp}
              initial="hidden"
              animate="visible"
            >
              {errors.educationalInstitution.message}
            </m.p>
          )}
        </div>

        <div className="flex flex-col gap-1">
          <Input
            type="text"
            placeholder="Регион образовательного учреждения"
            {...register("institutionAddress", {
              required: "Обязательное поле",
            })}
          />
          {errors.institutionAddress && (
            <m.p
              className="text-sm text-red-500"
              variants={fadeUp}
              initial="hidden"
              animate="visible"
            >
              {errors.institutionAddress.message}
            </m.p>
          )}
        </div>

        <div className="flex flex-col gap-1">
          <Input
            type="text"
            placeholder="Почтовый адрес"
            {...register("postalAddress", {
              required: "Обязательное поле",
            })}
          />
          {errors.postalAddress && (
            <m.p
              className="text-sm text-red-500"
              variants={fadeUp}
              initial="hidden"
              animate="visible"
            >
              {errors.postalAddress.message}
            </m.p>
          )}
        </div>
      </section>

      {/* Правая колонка */}
      <section className="space-y-4 sm:space-y-6 lg:space-y-4">
        <div className="flex flex-col gap-1">
          <Select {...register("gender", { required: "Обязательное поле" })}>
            <option value="">Пол</option>
            <option value="MALE">Мужской</option>
            <option value="FEMALE">Женский</option>
          </Select>
          {errors.gender && (
            <m.p
              className="text-sm text-red-500"
              variants={fadeUp}
              initial="hidden"
              animate="visible"
            >
              {errors.gender.message}
            </m.p>
          )}
        </div>

        <div className="flex flex-col gap-1">
          <Select
            {...register("classCourse", {
              required: "Обязательное поле",
            })}
          >
            <option value="">Класс / Курс</option>
            <option value="10 класс">10 класс</option>
            <option value="11 класс">11 класс</option>
            <option value="1 курс">1 курс</option>
            <option value="2 курс">2 курс</option>
          </Select>
          {errors.classCourse && (
            <m.p
              className="text-sm text-red-500"
              variants={fadeUp}
              initial="hidden"
              animate="visible"
            >
              {errors.classCourse.message}
            </m.p>
          )}
        </div>

        <div className="flex flex-col gap-1">
          <Input
            type="password"
            placeholder="Придумайте пароль"
            {...register("password", {
              required: "Обязательное поле",
              validate: validatePassword,
            })}
          />
          {errors.password && (
            <m.p
              className="text-sm text-red-500"
              variants={fadeUp}
              initial="hidden"
              animate="visible"
            >
              {errors.password.message}
            </m.p>
          )}
        </div>

        <div className="flex flex-col gap-1">
          <Input
            type="password"
            placeholder="Повторите пароль"
            {...register("confirmPassword", {
              required: "Обязательное поле",
              validate: validateConfirmPassword,
            })}
          />
          {errors.confirmPassword && (
            <m.p
              className="text-sm text-red-500"
              variants={fadeUp}
              initial="hidden"
              animate="visible"
            >
              {errors.confirmPassword.message}
            </m.p>
          )}
        </div>

        <div className="flex flex-col gap-3 pt-2 sm:gap-4">
          <div className="flex flex-col gap-1">
            <m.label
              className="flex items-start gap-2 text-xs sm:text-sm"
              variants={fadeUp}
              initial="hidden"
              animate="visible"
            >
              <Input
                type="checkbox"
                className="mt-1 flex-shrink-0"
                {...register("agreeToTerms", {
                  required: "Необходимо согласие",
                })}
              />
              <span className="leading-tight">
                Согласен на
                <a
                  href="/consent"
                  className="ml-1 text-blue-500 hover:underline"
                  target="_blank"
                  rel="noopener noreferrer"
                >
                  обработку персональных данных
                </a>
              </span>
            </m.label>
            {errors.agreeToTerms && (
              <m.p
                className="text-sm text-red-500"
                variants={fadeUp}
                initial="hidden"
                animate="visible"
              >
                {errors.agreeToTerms.message}
              </m.p>
            )}
          </div>

          <div className="flex flex-col gap-1">
            <m.label
              className="flex items-start gap-2 text-xs sm:text-sm"
              variants={fadeUp}
              initial="hidden"
              animate="visible"
            >
              <Input
                type="checkbox"
                className="mt-1 flex-shrink-0"
                {...register("agreeToRegulations", {
                  required: "Необходимо ознакомление",
                })}
              />
              <span className="leading-tight">
                Ознакомлен с
                <a
                  href="https://mvd.ru/upload/site116/folder_page/041/907/599/Polozhenie_Olimpiada_MosU.pdf "
                  className="mx-1 text-blue-500 hover:underline"
                  target="_blank"
                  rel="noopener noreferrer"
                >
                  Положением
                </a>
                и
                <a
                  href="https://mvd.ru/upload/site116/folder_page/041/907/599/Reglament_2024-2025.pdf "
                  className="mx-1 text-blue-500 hover:underline"
                  target="_blank"
                  rel="noopener noreferrer"
                >
                  Регламентом
                </a>
                Олимпиады
              </span>
            </m.label>
            {errors.agreeToRegulations && (
              <m.p
                className="text-sm text-red-500"
                variants={fadeUp}
                initial="hidden"
                animate="visible"
              >
                {errors.agreeToRegulations.message}
              </m.p>
            )}
          </div>
        </div>

        <div className="pt-2 sm:pt-4">
          <Button type="submit" className="w-full py-3 text-base sm:text-lg">
            Продолжить
          </Button>
        </div>
      </section>
    </form>
  );

  // Рендер шага 3 - выбор олимпиад (логика из профиля)
  const renderOlympiadsStep = () => (
    <div className="mx-auto max-w-4xl">
      <m.div
        variants={fadeUp}
        initial="hidden"
        animate="visible"
        className={cn("rounded-2xl p-8", {
          "border border-blue-900 bg-[#0b0f1a]": isDarkMode,
          "border border-gray-200 bg-white shadow-lg": !isDarkMode,
        })}
      >
        <h2
          className={cn("mb-6 text-center text-2xl font-bold", {
            "text-white": isDarkMode,
            "text-gray-900": !isDarkMode,
          })}
        >
          Выберите профиль олимпиады
        </h2>

        <p
          className={cn("mb-8 text-center", {
            "text-gray-300": isDarkMode,
            "text-gray-600": !isDarkMode,
          })}
        >
          Пожалуйста, выберите хотя бы один профиль для участия
        </p>

        {olympiadsLoading ? (
          <p
            className={cn("text-center", {
              "text-gray-400": isDarkMode,
              "text-gray-500": !isDarkMode,
            })}
          >
            Загрузка олимпиад...
          </p>
        ) : olympiads.length === 0 ? (
          <p
            className={cn("text-center", {
              "text-gray-400": isDarkMode,
              "text-gray-500": !isDarkMode,
            })}
          >
            Нет доступных олимпиад
          </p>
        ) : (
          <div className="grid grid-cols-1 gap-4 md:grid-cols-2">
            {olympiads.map((olympiad, index) => {
              const isSelected = selectedOlympiadNames.has(olympiad.name);
              return (
                <div
                  key={index}
                  className={cn(
                    "group cursor-pointer rounded-lg border-2 p-4 transition-all hover:shadow-md",
                    {
                      "border-blue-500 bg-blue-500/10": isSelected,
                      "border-gray-300 hover:border-blue-300":
                        !isSelected && !isDarkMode,
                      "border-gray-700 hover:border-blue-500":
                        !isSelected && isDarkMode,
                    },
                  )}
                  onClick={() => handleOlympiadChange(olympiad.name)}
                >
                  <div className="flex items-start">
                    <div
                      className={cn(
                        "mt-1 mr-3 flex h-5 w-5 flex-shrink-0 items-center justify-center rounded-full border-2 transition-all",
                        {
                          "border-blue-500 bg-blue-500 text-white": isSelected,
                          "border-gray-400 group-hover:border-blue-400":
                            !isSelected && !isDarkMode,
                          "border-gray-500 group-hover:border-blue-500":
                            !isSelected && isDarkMode,
                        },
                      )}
                    >
                      {isSelected && (
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          viewBox="0 0 20 20"
                          fill="currentColor"
                          className="h-3 w-3"
                        >
                          <path
                            fillRule="evenodd"
                            d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z"
                            clipRule="evenodd"
                          />
                        </svg>
                      )}
                    </div>
                    <div className="flex-1">
                      <h3 className="text-lg font-semibold">{olympiad.name}</h3>
                      {olympiad.description && (
                        <p
                          className={cn("mt-2 text-sm", {
                            "text-gray-600": !isDarkMode,
                            "text-gray-300": isDarkMode,
                          })}
                        >
                          {olympiad.description}
                        </p>
                      )}
                      {isSelected && (
                        <div className="mt-2 text-sm font-medium text-blue-500">
                          Выбрано
                        </div>
                      )}
                    </div>
                  </div>
                </div>
              );
            })}
          </div>
        )}

        {/* Кнопка подтверждения (логика из профиля) */}
        {selectedOlympiadNames.size > 0 && (
          <div className="mt-8 flex justify-center">
            <Button
              onClick={submitSelectedOlympiads}
              disabled={isSubmittingOlympiads}
              className={cn("px-8 py-3 text-lg", {
                "bg-green-600 hover:bg-green-500": isDarkMode,
                "bg-green-500 hover:bg-green-400": !isDarkMode,
              })}
            >
              {isSubmittingOlympiads ? "Отправка..." : "Завершить регистрацию"}
            </Button>
          </div>
        )}

        {selectedOlympiadNames.size === 0 && (
          <m.p
            className="mt-4 text-center text-sm text-red-500"
            variants={fadeUp}
            initial="hidden"
            animate="visible"
          >
            Выберите хотя бы одну олимпиаду
          </m.p>
        )}
      </m.div>
    </div>
  );

  // Модальное окно подтверждения
  const renderConfirmationModal = () => (
    <>
      <m.div
        initial={{ opacity: 0 }}
        animate={{ opacity: 1 }}
        exit={{ opacity: 0 }}
        className="fixed inset-0 z-50 bg-black/50 backdrop-blur-sm"
        onClick={() => setShowConfirmationModal(false)}
      />

      <m.div
        initial={{ opacity: 0, scale: 0.9 }}
        animate={{ opacity: 1, scale: 1 }}
        exit={{ opacity: 0, scale: 0.9 }}
        className={cn(
          "fixed top-1/2 left-1/2 z-50 max-h-[80vh] w-full max-w-4xl -translate-x-1/2 -translate-y-1/2 overflow-y-auto rounded-2xl p-6",
          {
            "border border-blue-900 bg-[#0b0f1a]": isDarkMode,
            "border border-gray-200 bg-white shadow-xl": !isDarkMode,
          },
        )}
      >
        <div className="mb-6">
          <h2
            className={cn("text-center text-2xl font-bold", {
              "text-white": isDarkMode,
              "text-gray-900": !isDarkMode,
            })}
          >
            Подтверждение данных
          </h2>
          <p
            className={cn("mt-2 text-center", {
              "text-gray-300": isDarkMode,
              "text-gray-600": !isDarkMode,
            })}
          >
            Пожалуйста, проверьте введенные данные перед продолжением
          </p>
        </div>

        {formData && (
          <div className="grid grid-cols-1 gap-6 md:grid-cols-2">
            {/* Личные данные */}
            <div className="space-y-4">
              <h3
                className={cn("border-b pb-2 text-lg font-semibold", {
                  "border-blue-700 text-blue-300": isDarkMode,
                  "border-blue-300 text-blue-600": !isDarkMode,
                })}
              >
                Личные данные
              </h3>

              <div className="space-y-3">
                <div>
                  <strong
                    className={cn("block text-sm", {
                      "text-blue-300": isDarkMode,
                      "text-blue-600": !isDarkMode,
                    })}
                  >
                    ФИО:
                  </strong>
                  <p>
                    {formData.lastName} {formData.firstName}{" "}
                    {formData.middleName}
                  </p>
                </div>

                <div>
                  <strong
                    className={cn("block text-sm", {
                      "text-blue-300": isDarkMode,
                      "text-blue-600": !isDarkMode,
                    })}
                  >
                    Дата рождения:
                  </strong>
                  <p>{formData.birthDate}</p>
                </div>

                <div>
                  <strong
                    className={cn("block text-sm", {
                      "text-blue-300": isDarkMode,
                      "text-blue-600": !isDarkMode,
                    })}
                  >
                    Пол:
                  </strong>
                  <p>{formData.gender === "MALE" ? "Мужской" : "Женский"}</p>
                </div>

                <div>
                  <strong
                    className={cn("block text-sm", {
                      "text-blue-300": isDarkMode,
                      "text-blue-600": !isDarkMode,
                    })}
                  >
                    СНИЛС:
                  </strong>
                  <p>{formData.snils}</p>
                </div>
              </div>
            </div>

            {/* Контактная информация */}
            <div className="space-y-4">
              <h3
                className={cn("border-b pb-2 text-lg font-semibold", {
                  "border-blue-700 text-blue-300": isDarkMode,
                  "border-blue-300 text-blue-600": !isDarkMode,
                })}
              >
                Контактная информация
              </h3>

              <div className="space-y-3">
                <div>
                  <strong
                    className={cn("block text-sm", {
                      "text-blue-300": isDarkMode,
                      "text-blue-600": !isDarkMode,
                    })}
                  >
                    Email:
                  </strong>
                  <p>{formData.email}</p>
                </div>

                <div>
                  <strong
                    className={cn("block text-sm", {
                      "text-blue-300": isDarkMode,
                      "text-blue-600": !isDarkMode,
                    })}
                  >
                    Телефон:
                  </strong>
                  <p>{formData.phoneNumber}</p>
                </div>
              </div>
            </div>

            {/* Адрес проживания */}
            <div className="space-y-4">
              <h3
                className={cn("border-b pb-2 text-lg font-semibold", {
                  "border-blue-700 text-blue-300": isDarkMode,
                  "border-blue-300 text-blue-600": !isDarkMode,
                })}
              >
                Адрес проживания
              </h3>

              <div className="space-y-3">
                <div>
                  <strong
                    className={cn("block text-sm", {
                      "text-blue-300": isDarkMode,
                      "text-blue-600": !isDarkMode,
                    })}
                  >
                    Регион:
                  </strong>
                  <p>{formData.residenceRegion}</p>
                </div>

                <div>
                  <strong
                    className={cn("block text-sm", {
                      "text-blue-300": isDarkMode,
                      "text-blue-600": !isDarkMode,
                    })}
                  >
                    Населенный пункт:
                  </strong>
                  <p>{formData.residenceSettlement}</p>
                </div>

                <div>
                  <strong
                    className={cn("block text-sm", {
                      "text-blue-300": isDarkMode,
                      "text-blue-600": !isDarkMode,
                    })}
                  >
                    Тип населенного пункта:
                  </strong>
                  <p>{formData.settlementType}</p>
                </div>

                <div>
                  <strong
                    className={cn("block text-sm", {
                      "text-blue-300": isDarkMode,
                      "text-blue-600": !isDarkMode,
                    })}
                  >
                    Почтовый адрес:
                  </strong>
                  <p>{formData.postalAddress}</p>
                </div>
              </div>
            </div>

            {/* Образовательная информация */}
            <div className="space-y-4">
              <h3
                className={cn("border-b pb-2 text-lg font-semibold", {
                  "border-blue-700 text-blue-300": isDarkMode,
                  "border-blue-300 text-blue-600": !isDarkMode,
                })}
              >
                Образовательная информация
              </h3>

              <div className="space-y-3">
                <div>
                  <strong
                    className={cn("block text-sm", {
                      "text-blue-300": isDarkMode,
                      "text-blue-600": !isDarkMode,
                    })}
                  >
                    Образовательное учреждение:
                  </strong>
                  <p>{formData.educationalInstitution}</p>
                </div>

                <div>
                  <strong
                    className={cn("block text-sm", {
                      "text-blue-300": isDarkMode,
                      "text-blue-600": !isDarkMode,
                    })}
                  >
                    Адрес учреждения:
                  </strong>
                  <p>{formData.institutionAddress}</p>
                </div>

                <div>
                  <strong
                    className={cn("block text-sm", {
                      "text-blue-300": isDarkMode,
                      "text-blue-600": !isDarkMode,
                    })}
                  >
                    Класс/Курс:
                  </strong>
                  <p>{formData.classCourse}</p>
                </div>
              </div>
            </div>
          </div>
        )}

        <div className="mt-8 flex justify-center gap-4">
          <Button
            onClick={() => setShowConfirmationModal(false)}
            disabled={isLoading}
            className={cn("px-6 py-2", {
              "bg-gray-600 hover:bg-gray-500": isDarkMode,
              "bg-gray-200 text-gray-800 hover:bg-gray-300": !isDarkMode,
            })}
          >
            Вернуться к редактированию
          </Button>
          <Button
            onClick={handleConfirmSubmit}
            disabled={isLoading}
            className={cn("px-6 py-2", {
              "bg-green-600 hover:bg-green-500": isDarkMode,
              "bg-green-500 hover:bg-green-400": !isDarkMode,
            })}
          >
            {isLoading ? "Отправка..." : "Подтвердить и продолжить"}
          </Button>
        </div>
      </m.div>
    </>
  );

  return (
    <div
      className={cn("min-h-screen w-screen font-sans", {
        "bg-[#0b0f1a] text-white": isDarkMode,
        "bg-gray-50 text-gray-900": !isDarkMode,
      })}
    >
      <BackgroundBlobs />
      <Navbar />

      <div
        className={cn(
          "relative flex flex-col justify-center px-4 py-8 sm:px-6 sm:py-12 lg:py-20",
          {
            "bg-gradient-to-br from-[#0f172a] via-[#101b36] to-[#14213d]":
              isDarkMode,
            "bg-gradient-to-br from-blue-50 via-blue-100 to-blue-200":
              !isDarkMode,
          },
        )}
      >
        <div className="mx-auto w-full max-w-6xl">
          <h1
            className={cn(
              "mb-6 text-center text-2xl font-bold sm:mb-8 sm:text-3xl lg:mb-12 lg:text-4xl",
              {
                "text-white": isDarkMode,
                "text-gray-900": !isDarkMode,
              },
            )}
          >
            Регистрация
          </h1>

          {currentStep === 1 && renderFormStep()}
          {currentStep === 3 && renderOlympiadsStep()}
        </div>
      </div>

      {showConfirmationModal && renderConfirmationModal()}

      <Footer />

      <ToastContainer
        position="top-right"
        autoClose={3000}
        hideProgressBar={false}
        newestOnTop={false}
        closeOnClick
        pauseOnHover
        draggable
      />
    </div>
  );
}

export default Registration;


import { create } from "zustand";
import { persist } from "zustand/middleware";

interface UserData {
  id?: number;
  email?: string;
  role: string;
}

interface AuthStore {
  token: string | null;
  isAuthenticated: boolean;
  userData: UserData | null;
  setToken: (token: string) => void;
  setUserData: (userData: UserData) => void;
  clearToken: () => void;
}

export const useAuthStore = create<AuthStore>()(
  persist(
    (set) => ({
      token: null,
      isAuthenticated: false,
      userData: null,
      setToken: (token) => set({ token, isAuthenticated: true }),
      setUserData: (userData) => set({ userData }),
      clearToken: () =>
        set({ token: null, isAuthenticated: false, userData: null }),
    }),
    {
      name: "auth-storage",
    },
  ),
);


import { create } from "zustand";
import { persist } from "zustand/middleware";
import { IForm } from "../types/IForm.type";

interface RegistrationData {
  auth?: {
    email: string;
    password: string;
    confirmPassword: string;
  };
  profile?: Partial<IForm>;
}

interface RegistrationStore {
  registrationData: RegistrationData;
  setRegistrationData: (data: RegistrationData) => void;
  clearRegistrationData: () => void;
}

export const useRegistrationStore = create<RegistrationStore>()(
  persist(
    (set) => ({
      registrationData: {},
      setRegistrationData: (data) => set({ registrationData: data }),
      clearRegistrationData: () => set({ registrationData: {} }),
    }),
    {
      name: "registration-storage",
    },
  ),
);


import { create } from "zustand";
import { persist, createJSONStorage } from "zustand/middleware";

interface ThemeStore {
  isDarkMode: boolean;
  toggleTheme: () => void;
}

export const useThemeStore = create<ThemeStore>()(
  persist(
    (set) => ({
      isDarkMode: true,
      toggleTheme: () => set((state) => ({ isDarkMode: !state.isDarkMode })),
    }),
    {
      name: "theme-storage",
      storage: createJSONStorage(() => localStorage),
    },
  ),
);


export interface IDocs {
  title: string;
  link: string;
}


export interface IForm {
  firstName: string;
  patronymic: string;
  lastName: string;
  birthDate: Date;
  email: string;
  phoneNumber: number;
  residenceRegion: string;
  residenceSettlement: string;
  educationalInstitution: string;
  institutionAddress: string;
  gender: string;
  classCourse: number;
  snils: number;
  postalAddress: string;
  password: string;
  confirmPassword: string;
}


export interface IInfoItem {
  title: string;
  desc: string;
  link: string;
}


export interface INewsItem {
  id: number;
  title: string;
  description: string;
  newsDate: string;
}

export interface INewsModalProps {
  text: string;
  date: string;
  desc: string;
  isOpen: boolean;
  onClose: () => void;
}


export interface IOlympiad {
  id: number;
  name: string;
  date: string;
  description: string;
}


export interface IUserData {
  id: number;
  email: string;
  role?: string;
}

// interface IQualifResults {
//   id: number;
//   lastName: string;
//   firstName: string;
//   middleName: string;
//   region: string;
//   grade: number | string;
//   score: number;
//   status?: string;
//   details?: string;
// }

interface IRankings {
  id: number;
  lastName: string;
  firstName: string;
  middleName: string;
  region: string;
  grade: number | string;
  score: number;
  status:
    | "Победитель"
    | "Призер II степени"
    | "Призер III степени"
    | "Участник";
  details: string;
}

export const rankings2023: IRankings[] = [
  {
    id: 231,
    lastName: "Мурзин",
    firstName: "Дмитрий",
    middleName: "Константинович",
    region: "Санкт-Петербург",
    grade: 11,
    score: 463,
    status: "Победитель",
    details:
      "https://mvd.ru/upload/site116/folder_page/047/644/342/Murzin_D.K.pdf",
  },
  {
    id: 1001,
    lastName: "Пахневский",
    firstName: "Гордей",
    middleName: "Михайлович",
    region: "Новосибирская область",
    grade: 2,
    score: 423,
    status: "Призер II степени",
    details:
      "https://mvd.ru/upload/site116/folder_page/047/644/342/Pakhnevskiy_G.M.pdf",
  },
  {
    id: 228,
    lastName: "Чечеткин",
    firstName: "Алексей",
    middleName: "Викторович",
    grade: "11 класс",
    region: "Санкт-Петербург",
    score: 416,
    status: "Призер II степени",
    details:
      "https://mvd.ru/upload/site116/folder_page/047/644/342/Chechetkin_A.V.pdf",
  },
  {
    id: 90,
    lastName: "Зайцева",
    firstName: "Снежана",
    middleName: "Александровна",
    grade: "11 класс",
    region: "Кемеровская область",
    score: 414,
    status: "Призер III степени",
    details:
      "https://mvd.ru/upload/site116/folder_page/047/644/342/Zaytseva_S.A.pdf",
  },
  {
    id: 519,
    lastName: "Черкасов",
    firstName: "Артём",
    middleName: "Александрович",
    grade: "11 класс",
    region: "Астраханская область",
    score: 411,
    status: "Призер III степени",
    details:
      "https://mvd.ru/upload/site116/folder_page/047/644/342/Cherkasov_A.A.pdf",
  },
];

// Список регионов России
export const regions = [
  "Республика Адыгея (Адыгея)",
  "Республика Алтай",
  "Республика Башкортостан",
  "Республика Бурятия",
  "Республика Дагестан",
  "Донецкая Народная Республика",
  "Республика Ингушетия",
  "Кабардино-Балкарская Республика",
  "Республика Калмыкия",
  "Карачаево-Черкесская Республика",
  "Республика Карелия",
  "Республика Коми",
  "Республика Крым",
  "Луганская Народная Республика",
  "Республика Марий Эл",
  "Республика Мордовия",
  "Республика Саха (Якутия)",
  "Республика Северная Осетия - Алания",
  "Республика Татарстан (Татарстан)",
  "Республика Тыва",
  "Удмуртская Республика",
  "Республика Хакасия",
  "Чеченская Республика",
  "Чувашская Республика - Чувашия",
  "Алтайский край",
  "Забайкальский край",
  "Камчатский край",
  "Краснодарский край",
  "Красноярский край",
  "Пермский край",
  "Приморский край",
  "Ставропольский край",
  "Хабаровский край",
  "Амурская область",
  "Архангельская область",
  "Астраханская область",
  "Белгородская область",
  "Брянская область",
  "Владимирская область",
  "Волгоградская область",
  "Вологодская область",
  "Воронежская область",
  "Запорожская область",
  "Ивановская область",
  "Иркутская область",
  "Калининградская область",
  "Калужская область",
  "Кемеровская область - Кузбасс",
  "Кировская область",
  "Костромская область",
  "Курганская область",
  "Курская область",
  "Ленинградская область",
  "Липецкая область",
  "Магаданская область",
  "Московская область",
  "Мурманская область",
  "Нижегородская область",
  "Новгородская область",
  "Новосибирская область",
  "Омская область",
  "Оренбургская область",
  "Орловская область",
  "Пензенская область",
  "Псковская область",
  "Ростовская область",
  "Рязанская область",
  "Самарская область",
  "Саратовская область",
  "Сахалинская область",
  "Свердловская область",
  "Смоленская область",
  "Тамбовская область",
  "Тверская область",
  "Томская область",
  "Тульская область",
  "Тюменская область",
  "Ульяновская область",
  "Херсонская область",
  "Челябинская область",
  "Ярославская область",
  "Москва",
  "Санкт-Петербург",
  "Севастополь",
  "Еврейская автономная область",
  "Ненецкий автономный округ",
  "Ханты-Мансийский автономный округ - Югра",
  "Чукотский автономный округ",
  "Ямало-Ненецкий автономный округ",
];


import { useEffect, useState } from "react";

export function useDebounce(value: string, delay = 300) {
  const [debouncedValue, setDebouncedValue] = useState(value);

  useEffect(() => {
    const handler = setTimeout(() => {
      setDebouncedValue(value);
    }, delay);

    return () => {
      clearTimeout(handler);
    };
  }, [value, delay]);

  return debouncedValue;
}


@import "tailwindcss";

body {
  margin: 0;
  display: flex;
  place-items: center;
  min-width: 320px;
  min-height: 100vh;
}


import "./index.css";
import { StrictMode } from "react";
import { createRoot } from "react-dom/client";
import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
import { domAnimation, LazyMotion } from "framer-motion";
import { BrowserRouter } from "react-router-dom";
import App from "../src/app/App.tsx";

const queryClient = new QueryClient();

createRoot(document.getElementById("root")!).render(
  <StrictMode>
    <LazyMotion features={domAnimation}>
      <QueryClientProvider client={queryClient}>
        <BrowserRouter>
          <App />
        </BrowserRouter>
      </QueryClientProvider>
    </LazyMotion>
  </StrictMode>,
);


/// <reference types="vite/client" />


